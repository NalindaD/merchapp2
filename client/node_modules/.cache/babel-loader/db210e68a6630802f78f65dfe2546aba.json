{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"F:/mern/udemy/ecommerce/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"F:/mern/udemy/ecommerce/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useEffect}from\"react\";import{Switch,Route}from\"react-router-dom\";import{ToastContainer}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import Login from\"./pages/auth/Login\";import Register from\"./pages/auth/Register\";import Home from\"./pages/Home\";import Header from\"./components/nav/Header\";import SideDrawer from\"./components/drawer/SideDrawer\";import RegisterComplete from\"./pages/auth/RegisterComplete\";import ForgotPassword from\"./pages/auth/ForgotPassword\";import History from\"./pages/user/History\";import UserRoute from\"./components/routes/UserRoute\";import AdminRoute from\"./components/routes/AdminRoute\";import Password from\"./pages/user/Password\";import Wishlist from\"./pages/user/Wishlist\";import AdminDashboard from\"./pages/admin/AdminDashboard\";import SellerDashboard from\"./pages/seller/SellerDashboard\";import CategoryCreate from\"./pages/admin/category/CategoryCreate\";import CategoryUpdate from\"./pages/admin/category/CategoryUpdate\";import SubCreate from\"./pages/admin/sub/SubCreate\";import SubUpdate from\"./pages/admin/sub/SubUpdate\";import ProductCreate from\"./pages/admin/product/ProductCreate\";import AllProducts from\"./pages/admin/product/AllProducts\";import ProductUpdate from\"./pages/admin/product/ProductUpdate\";import Product from\"./pages/Product\";import CategoryHome from\"./pages/category/CategoryHome\";import SubHome from\"./pages/sub/SubHome\";import Shop from\"./pages/Shop\";import Cart from\"./pages/Cart\";import Checkout from\"./pages/Checkout\";import CreateCouponPage from\"./pages/admin/coupon/CreateCouponPage\";import Payment from\"./pages/Payment\";import{auth}from\"./firebase\";import{useDispatch}from\"react-redux\";import{currentUser}from\"./functions/auth\";var App=function App(){var dispatch=useDispatch();// to check firebase auth state\nuseEffect(function(){var unsubscribe=auth.onAuthStateChanged(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(user){var idTokenResult;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!user){_context.next=5;break;}_context.next=3;return user.getIdTokenResult();case 3:idTokenResult=_context.sent;// console.log(\"user\", user);\ncurrentUser(idTokenResult.token).then(function(res){dispatch({type:\"LOGGED_IN_USER\",payload:{name:res.data.name,email:res.data.email,token:idTokenResult.token,role:res.data.role,_id:res.data._id}});}).catch(function(err){return console.log(err);});case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());// cleanup\nreturn function(){return unsubscribe();};},[dispatch]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(SideDrawer,{}),/*#__PURE__*/_jsx(ToastContainer,{}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",component:Home}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/login\",component:Login}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/register\",component:Register}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/register/complete\",component:RegisterComplete}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/forgot/password\",component:ForgotPassword}),/*#__PURE__*/_jsx(UserRoute,{exact:true,path:\"/user/history\",component:History}),/*#__PURE__*/_jsx(UserRoute,{exact:true,path:\"/user/password\",component:Password}),/*#__PURE__*/_jsx(UserRoute,{exact:true,path:\"/user/wishlist\",component:Wishlist}),/*#__PURE__*/_jsx(AdminRoute,{exact:true,path:\"/admin/dashboard\",component:AdminDashboard}),/*#__PURE__*/_jsx(AdminRoute,{exact:true,path:\"/seller/dashboard\",component:SellerDashboard}),/*#__PURE__*/_jsx(AdminRoute,{exact:true,path:\"/admin/category\",component:CategoryCreate}),/*#__PURE__*/_jsx(AdminRoute,{exact:true,path:\"/admin/category/:slug\",component:CategoryUpdate}),/*#__PURE__*/_jsx(AdminRoute,{exact:true,path:\"/admin/sub\",component:SubCreate}),/*#__PURE__*/_jsx(AdminRoute,{exact:true,path:\"/admin/sub/:slug\",component:SubUpdate}),/*#__PURE__*/_jsx(AdminRoute,{exact:true,path:\"/admin/product\",component:ProductCreate}),/*#__PURE__*/_jsx(AdminRoute,{exact:true,path:\"/admin/products\",component:AllProducts}),/*#__PURE__*/_jsx(AdminRoute,{exact:true,path:\"/admin/product/:slug\",component:ProductUpdate}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/product/:slug\",component:Product}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/category/:slug\",component:CategoryHome}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/sub/:slug\",component:SubHome}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/shop\",component:Shop}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/cart\",component:Cart}),/*#__PURE__*/_jsx(UserRoute,{exact:true,path:\"/checkout\",component:Checkout}),/*#__PURE__*/_jsx(AdminRoute,{exact:true,path:\"/admin/coupon\",component:CreateCouponPage}),/*#__PURE__*/_jsx(UserRoute,{exact:true,path:\"/payment\",component:Payment})]})]});};export default App;","map":{"version":3,"sources":["F:/mern/udemy/ecommerce/client/src/App.js"],"names":["React","useEffect","Switch","Route","ToastContainer","Login","Register","Home","Header","SideDrawer","RegisterComplete","ForgotPassword","History","UserRoute","AdminRoute","Password","Wishlist","AdminDashboard","SellerDashboard","CategoryCreate","CategoryUpdate","SubCreate","SubUpdate","ProductCreate","AllProducts","ProductUpdate","Product","CategoryHome","SubHome","Shop","Cart","Checkout","CreateCouponPage","Payment","auth","useDispatch","currentUser","App","dispatch","unsubscribe","onAuthStateChanged","user","getIdTokenResult","idTokenResult","token","then","res","type","payload","name","data","email","role","_id","catch","err","console","log"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport { ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nimport Login from \"./pages/auth/Login\";\nimport Register from \"./pages/auth/Register\";\nimport Home from \"./pages/Home\";\nimport Header from \"./components/nav/Header\";\nimport SideDrawer from \"./components/drawer/SideDrawer\";\n\nimport RegisterComplete from \"./pages/auth/RegisterComplete\";\nimport ForgotPassword from \"./pages/auth/ForgotPassword\";\nimport History from \"./pages/user/History\";\nimport UserRoute from \"./components/routes/UserRoute\";\nimport AdminRoute from \"./components/routes/AdminRoute\";\nimport Password from \"./pages/user/Password\";\nimport Wishlist from \"./pages/user/Wishlist\";\nimport AdminDashboard from \"./pages/admin/AdminDashboard\";\nimport SellerDashboard from \"./pages/seller/SellerDashboard\";\nimport CategoryCreate from \"./pages/admin/category/CategoryCreate\";\nimport CategoryUpdate from \"./pages/admin/category/CategoryUpdate\";\nimport SubCreate from \"./pages/admin/sub/SubCreate\";\nimport SubUpdate from \"./pages/admin/sub/SubUpdate\";\nimport ProductCreate from \"./pages/admin/product/ProductCreate\";\nimport AllProducts from \"./pages/admin/product/AllProducts\";\nimport ProductUpdate from \"./pages/admin/product/ProductUpdate\";\nimport Product from \"./pages/Product\";\nimport CategoryHome from \"./pages/category/CategoryHome\";\nimport SubHome from \"./pages/sub/SubHome\";\nimport Shop from \"./pages/Shop\";\nimport Cart from \"./pages/Cart\";\nimport Checkout from \"./pages/Checkout\";\nimport CreateCouponPage from \"./pages/admin/coupon/CreateCouponPage\";\nimport Payment from \"./pages/Payment\";\n\nimport { auth } from \"./firebase\";\nimport { useDispatch } from \"react-redux\";\nimport { currentUser } from \"./functions/auth\";\n\nconst App = () => {\n  const dispatch = useDispatch();\n\n  // to check firebase auth state\n  useEffect(() => {\n    const unsubscribe = auth.onAuthStateChanged(async (user) => {\n      if (user) {\n        const idTokenResult = await user.getIdTokenResult();\n        // console.log(\"user\", user);\n\n        currentUser(idTokenResult.token)\n          .then((res) => {\n            dispatch({\n              type: \"LOGGED_IN_USER\",\n              payload: {\n                name: res.data.name,\n                email: res.data.email,\n                token: idTokenResult.token,\n                role: res.data.role,\n                _id: res.data._id,\n              },\n            });\n          })\n          .catch((err) => console.log(err));\n      }\n    });\n    // cleanup\n    return () => unsubscribe();\n  }, [dispatch]);\n\n  return (\n    <>\n      <Header />\n      <SideDrawer />\n      <ToastContainer />\n      <Switch>\n        <Route exact path=\"/\" component={Home} />\n        <Route exact path=\"/login\" component={Login} />\n        <Route exact path=\"/register\" component={Register} />\n        <Route exact path=\"/register/complete\" component={RegisterComplete} />\n        <Route exact path=\"/forgot/password\" component={ForgotPassword} />\n        <UserRoute exact path=\"/user/history\" component={History} />\n        <UserRoute exact path=\"/user/password\" component={Password} />\n        <UserRoute exact path=\"/user/wishlist\" component={Wishlist} />\n        <AdminRoute exact path=\"/admin/dashboard\" component={AdminDashboard} />\n        <AdminRoute exact path=\"/seller/dashboard\" component={SellerDashboard} />\n        <AdminRoute exact path=\"/admin/category\" component={CategoryCreate} />\n        <AdminRoute\n          exact\n          path=\"/admin/category/:slug\"\n          component={CategoryUpdate}\n        />\n        <AdminRoute exact path=\"/admin/sub\" component={SubCreate} />\n        <AdminRoute exact path=\"/admin/sub/:slug\" component={SubUpdate} />\n        <AdminRoute exact path=\"/admin/product\" component={ProductCreate} />\n        <AdminRoute exact path=\"/admin/products\" component={AllProducts} />\n        <AdminRoute\n          exact\n          path=\"/admin/product/:slug\"\n          component={ProductUpdate}\n        />\n        <Route exact path=\"/product/:slug\" component={Product} />\n        <Route exact path=\"/category/:slug\" component={CategoryHome} />\n        <Route exact path=\"/sub/:slug\" component={SubHome} />\n        <Route exact path=\"/shop\" component={Shop} />\n        <Route exact path=\"/cart\" component={Cart} />\n        <UserRoute exact path=\"/checkout\" component={Checkout} />\n        <AdminRoute exact path=\"/admin/coupon\" component={CreateCouponPage} />\n        <UserRoute exact path=\"/payment\" component={Payment} />\n      </Switch>\n    </>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}