{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"F:/mern/udemy/ecommerce/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"F:/mern/udemy/ecommerce/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"F:/mern/udemy/ecommerce/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"F:/mern/udemy/ecommerce/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{auth}from\"../../firebase\";import{toast}from\"react-toastify\";import{useSelector}from\"react-redux\";var Register=function Register(_ref){var history=_ref.history;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useSelector=useSelector(function(state){return _objectSpread({},state);}),user=_useSelector.user;useEffect(function(){if(user&&user.token)history.push(\"/\");},[user,history]);var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var config;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();// console.log(\"ENV --->\", process.env.REACT_APP_REGISTER_REDIRECT_URL);\nconfig={url:process.env.REACT_APP_REGISTER_REDIRECT_URL,handleCodeInApp:true};_context.next=4;return auth.sendSignInLinkToEmail(email,config);case 4:toast.success(\"Email is sent to \".concat(email,\". Click the link to complete your registration.\"));// save user email in local storage\nwindow.localStorage.setItem(\"emailForRegistration\",email);// clear state\nsetEmail(\"\");case 7:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();var registerForm=function registerForm(){return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},placeholder:\"Your email\",autoFocus:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-raised\",children:\"Register\"})]});};return/*#__PURE__*/_jsx(\"div\",{className:\"container p-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 offset-md-3\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Register\"}),registerForm()]})})});};export default Register;","map":{"version":3,"sources":["F:/mern/udemy/ecommerce/client/src/pages/auth/Register.js"],"names":["React","useState","useEffect","auth","toast","useSelector","Register","history","email","setEmail","state","user","token","push","handleSubmit","e","preventDefault","config","url","process","env","REACT_APP_REGISTER_REDIRECT_URL","handleCodeInApp","sendSignInLinkToEmail","success","window","localStorage","setItem","registerForm","target","value"],"mappings":"wqBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,IAAT,KAAqB,gBAArB,CACA,OAASC,KAAT,KAAsB,gBAAtB,CACA,OAASC,WAAT,KAA4B,aAA5B,CAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,MAAiB,IAAdC,CAAAA,OAAc,MAAdA,OAAc,eACNN,QAAQ,CAAC,EAAD,CADF,wCACzBO,KADyB,eAClBC,QADkB,gCAGfJ,WAAW,CAAC,SAACK,KAAD,0BAAiBA,KAAjB,GAAD,CAHI,CAGxBC,IAHwB,cAGxBA,IAHwB,CAKhCT,SAAS,CAAC,UAAM,CACd,GAAIS,IAAI,EAAIA,IAAI,CAACC,KAAjB,CAAwBL,OAAO,CAACM,IAAR,CAAa,GAAb,EACzB,CAFQ,CAEN,CAACF,IAAD,CAAOJ,OAAP,CAFM,CAAT,CAIA,GAAMO,CAAAA,YAAY,2FAAG,iBAAOC,CAAP,6HACnBA,CAAC,CAACC,cAAF,GACA;AACMC,MAHa,CAGJ,CACbC,GAAG,CAAEC,OAAO,CAACC,GAAR,CAAYC,+BADJ,CAEbC,eAAe,CAAE,IAFJ,CAHI,uBAQbnB,CAAAA,IAAI,CAACoB,qBAAL,CAA2Bf,KAA3B,CAAkCS,MAAlC,CARa,QASnBb,KAAK,CAACoB,OAAN,4BACsBhB,KADtB,qDAGA;AACAiB,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,sBAA5B,CAAoDnB,KAApD,EACA;AACAC,QAAQ,CAAC,EAAD,CAAR,CAfmB,sDAAH,kBAAZK,CAAAA,YAAY,6CAAlB,CAkBA,GAAMc,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,sBACnB,cAAM,QAAQ,CAAEd,YAAhB,wBACE,cACE,IAAI,CAAC,OADP,CAEE,SAAS,CAAC,cAFZ,CAGE,KAAK,CAAEN,KAHT,CAIE,QAAQ,CAAE,kBAACO,CAAD,QAAON,CAAAA,QAAQ,CAACM,CAAC,CAACc,MAAF,CAASC,KAAV,CAAf,EAJZ,CAKE,WAAW,CAAC,YALd,CAME,SAAS,KANX,EADF,cAUE,aAVF,cAWE,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,gBAAhC,sBAXF,GADmB,EAArB,CAkBA,mBACE,YAAK,SAAS,CAAC,eAAf,uBACE,YAAK,SAAS,CAAC,KAAf,uBACE,aAAK,SAAS,CAAC,sBAAf,wBACE,gCADF,CAEGF,YAAY,EAFf,GADF,EADF,EADF,CAUD,CAvDD,CAyDA,cAAetB,CAAAA,QAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { auth } from \"../../firebase\";\nimport { toast } from \"react-toastify\";\nimport { useSelector } from \"react-redux\";\n\nconst Register = ({ history }) => {\n  const [email, setEmail] = useState(\"\");\n\n  const { user } = useSelector((state) => ({ ...state }));\n\n  useEffect(() => {\n    if (user && user.token) history.push(\"/\");\n  }, [user, history]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    // console.log(\"ENV --->\", process.env.REACT_APP_REGISTER_REDIRECT_URL);\n    const config = {\n      url: process.env.REACT_APP_REGISTER_REDIRECT_URL,\n      handleCodeInApp: true,\n    };\n\n    await auth.sendSignInLinkToEmail(email, config);\n    toast.success(\n      `Email is sent to ${email}. Click the link to complete your registration.`\n    );\n    // save user email in local storage\n    window.localStorage.setItem(\"emailForRegistration\", email);\n    // clear state\n    setEmail(\"\");\n  };\n\n  const registerForm = () => (\n    <form onSubmit={handleSubmit}>\n      <input\n        type=\"email\"\n        className=\"form-control\"\n        value={email}\n        onChange={(e) => setEmail(e.target.value)}\n        placeholder=\"Your email\"\n        autoFocus\n      />\n\n      <br />\n      <button type=\"submit\" className=\"btn btn-raised\">\n        Register\n      </button>\n    </form>\n  );\n\n  return (\n    <div className=\"container p-5\">\n      <div className=\"row\">\n        <div className=\"col-md-6 offset-md-3\">\n          <h4>Register</h4>\n          {registerForm()}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Register;\n"]},"metadata":{},"sourceType":"module"}