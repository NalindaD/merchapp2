{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"F:/mern/udemy/ecommerce/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"F:/mern/udemy/ecommerce/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"F:/mern/udemy/ecommerce/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"F:/mern/udemy/ecommerce/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{auth}from\"../../firebase\";import{toast}from\"react-toastify\";import{useSelector}from\"react-redux\";var ForgotPassword=function ForgotPassword(_ref){var history=_ref.history;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useSelector=useSelector(function(state){return _objectSpread({},state);}),user=_useSelector.user;useEffect(function(){if(user&&user.token)history.push(\"/\");},[user,history]);var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var config;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();setLoading(true);config={url:process.env.REACT_APP_FORGOT_PASSWORD_REDIRECT,handleCodeInApp:true};_context.next=5;return auth.sendPasswordResetEmail(email,config).then(function(){setEmail(\"\");setLoading(false);toast.success(\"Check your email for password reset link\");}).catch(function(error){setLoading(false);toast.error(error.message);console.log(\"ERROR MSG IN FORGOT PASSWORD\",error);});case 5:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"container col-md-6 offset-md-3 p-5\",children:[loading?/*#__PURE__*/_jsx(\"h4\",{className:\"text-danger\",children:\"Loading\"}):/*#__PURE__*/_jsx(\"h4\",{children:\"Forgot Password\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},placeholder:\"Type your email\",autoFocus:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-raised\",disabled:!email,children:\"Submit\"})]})]});};export default ForgotPassword;","map":{"version":3,"sources":["F:/mern/udemy/ecommerce/client/src/pages/auth/ForgotPassword.js"],"names":["React","useState","useEffect","auth","toast","useSelector","ForgotPassword","history","email","setEmail","loading","setLoading","state","user","token","push","handleSubmit","e","preventDefault","config","url","process","env","REACT_APP_FORGOT_PASSWORD_REDIRECT","handleCodeInApp","sendPasswordResetEmail","then","success","catch","error","message","console","log","target","value"],"mappings":"wqBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,IAAT,KAAqB,gBAArB,CACA,OAASC,KAAT,KAAsB,gBAAtB,CACA,OAASC,WAAT,KAA4B,aAA5B,CAEA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,MAAiB,IAAdC,CAAAA,OAAc,MAAdA,OAAc,eACZN,QAAQ,CAAC,EAAD,CADI,wCAC/BO,KAD+B,eACxBC,QADwB,8BAERR,QAAQ,CAAC,KAAD,CAFA,yCAE/BS,OAF+B,eAEtBC,UAFsB,gCAIrBN,WAAW,CAAC,SAACO,KAAD,0BAAiBA,KAAjB,GAAD,CAJU,CAI9BC,IAJ8B,cAI9BA,IAJ8B,CAMtCX,SAAS,CAAC,UAAM,CACd,GAAIW,IAAI,EAAIA,IAAI,CAACC,KAAjB,CAAwBP,OAAO,CAACQ,IAAR,CAAa,GAAb,EACzB,CAFQ,CAEN,CAACF,IAAD,CAAON,OAAP,CAFM,CAAT,CAIA,GAAMS,CAAAA,YAAY,2FAAG,iBAAOC,CAAP,6HACnBA,CAAC,CAACC,cAAF,GACAP,UAAU,CAAC,IAAD,CAAV,CAEMQ,MAJa,CAIJ,CACbC,GAAG,CAAEC,OAAO,CAACC,GAAR,CAAYC,kCADJ,CAEbC,eAAe,CAAE,IAFJ,CAJI,uBASbrB,CAAAA,IAAI,CACPsB,sBADG,CACoBjB,KADpB,CAC2BW,MAD3B,EAEHO,IAFG,CAEE,UAAM,CACVjB,QAAQ,CAAC,EAAD,CAAR,CACAE,UAAU,CAAC,KAAD,CAAV,CACAP,KAAK,CAACuB,OAAN,CAAc,0CAAd,EACD,CANG,EAOHC,KAPG,CAOG,SAACC,KAAD,CAAW,CAChBlB,UAAU,CAAC,KAAD,CAAV,CACAP,KAAK,CAACyB,KAAN,CAAYA,KAAK,CAACC,OAAlB,EACAC,OAAO,CAACC,GAAR,CAAY,8BAAZ,CAA4CH,KAA5C,EACD,CAXG,CATa,uDAAH,kBAAZb,CAAAA,YAAY,6CAAlB,CAuBA,mBACE,aAAK,SAAS,CAAC,oCAAf,WACGN,OAAO,cACN,WAAI,SAAS,CAAC,aAAd,qBADM,cAGN,uCAJJ,cAOE,cAAM,QAAQ,CAAEM,YAAhB,wBACE,cACE,IAAI,CAAC,OADP,CAEE,SAAS,CAAC,cAFZ,CAGE,KAAK,CAAER,KAHT,CAIE,QAAQ,CAAE,kBAACS,CAAD,QAAOR,CAAAA,QAAQ,CAACQ,CAAC,CAACgB,MAAF,CAASC,KAAV,CAAf,EAJZ,CAKE,WAAW,CAAC,iBALd,CAME,SAAS,KANX,EADF,cASE,aATF,cAUE,eAAQ,SAAS,CAAC,gBAAlB,CAAmC,QAAQ,CAAE,CAAC1B,KAA9C,oBAVF,GAPF,GADF,CAwBD,CAzDD,CA2DA,cAAeF,CAAAA,cAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { auth } from \"../../firebase\";\nimport { toast } from \"react-toastify\";\nimport { useSelector } from \"react-redux\";\n\nconst ForgotPassword = ({ history }) => {\n  const [email, setEmail] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const { user } = useSelector((state) => ({ ...state }));\n\n  useEffect(() => {\n    if (user && user.token) history.push(\"/\");\n  }, [user, history]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n\n    const config = {\n      url: process.env.REACT_APP_FORGOT_PASSWORD_REDIRECT,\n      handleCodeInApp: true,\n    };\n\n    await auth\n      .sendPasswordResetEmail(email, config)\n      .then(() => {\n        setEmail(\"\");\n        setLoading(false);\n        toast.success(\"Check your email for password reset link\");\n      })\n      .catch((error) => {\n        setLoading(false);\n        toast.error(error.message);\n        console.log(\"ERROR MSG IN FORGOT PASSWORD\", error);\n      });\n  };\n\n  return (\n    <div className=\"container col-md-6 offset-md-3 p-5\">\n      {loading ? (\n        <h4 className=\"text-danger\">Loading</h4>\n      ) : (\n        <h4>Forgot Password</h4>\n      )}\n\n      <form onSubmit={handleSubmit}>\n        <input\n          type=\"email\"\n          className=\"form-control\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          placeholder=\"Type your email\"\n          autoFocus\n        />\n        <br />\n        <button className=\"btn btn-raised\" disabled={!email}>\n          Submit\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport default ForgotPassword;\n"]},"metadata":{},"sourceType":"module"}