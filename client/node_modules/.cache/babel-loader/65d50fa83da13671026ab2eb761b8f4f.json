{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _defineProperty from\"F:/mern/udemy/ecommerce/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"F:/mern/udemy/ecommerce/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"F:/mern/udemy/ecommerce/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import AdminNav from\"../../../components/nav/AdminNav\";import{toast}from\"react-toastify\";import{useSelector}from\"react-redux\";import{createProduct}from\"../../../functions/product\";import ProductCreateForm from\"../../../components/forms/ProductCreateForm\";import{getCategories,getCategorySubs}from\"../../../functions/category\";import FileUpload from\"../../../components/forms/FileUpload\";import{LoadingOutlined}from\"@ant-design/icons\";var initialState={title:\"Macbook Pro\",description:\"This is the best Apple product\",price:\"45000\",categories:[],category:\"\",subs:[],shipping:\"Yes\",quantity:\"50\",images:[// {\n//   public_id: \"jwrzeubemmypod99e8lz\",\n//   url:\n//     \"https://res.cloudinary.com/dcqjrwaoi/image/upload/v1599480909/jwrzeubemmypod99e8lz.jpg\",\n// },\n// {\n//   public_id: \"j7uerlvhog1eic0oyize\",\n//   url:\n//     \"https://res.cloudinary.com/dcqjrwaoi/image/upload/v1599480912/j7uerlvhog1eic0oyize.jpg\",\n// },\n// {\n//   public_id: \"ho6wnp7sugyemnmtoogf\",\n//   url:\n//     \"https://res.cloudinary.com/dcqjrwaoi/image/upload/v1599480913/ho6wnp7sugyemnmtoogf.jpg\",\n// },\n],colors:[\"Black\",\"Brown\",\"Silver\",\"White\",\"Blue\"],brands:[\"Apple\",\"Samsung\",\"Microsoft\",\"Lenovo\",\"ASUS\"],color:\"White\",brand:\"Apple\"};var ProductCreate=function ProductCreate(){var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),subOptions=_useState4[0],setSubOptions=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showSub=_useState6[0],setShowSub=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];// redux\nvar _useSelector=useSelector(function(state){return _objectSpread({},state);}),user=_useSelector.user;useEffect(function(){loadCategories();},[]);var loadCategories=function loadCategories(){return getCategories().then(function(c){return setValues(_objectSpread(_objectSpread({},values),{},{categories:c.data}));});};var handleSubmit=function handleSubmit(e){e.preventDefault();createProduct(values,user.token).then(function(res){console.log(res);window.alert(\"\\\"\".concat(res.data.title,\"\\\" is created\"));window.location.reload();}).catch(function(err){console.log(err);// if (err.response.status === 400) toast.error(err.response.data);\ntoast.error(err.response.data.err);});};var handleChange=function handleChange(e){setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({},e.target.name,e.target.value)));// console.log(e.target.name, \" ----- \", e.target.value);\n};var handleCatagoryChange=function handleCatagoryChange(e){e.preventDefault();console.log(\"CLICKED CATEGORY\",e.target.value);setValues(_objectSpread(_objectSpread({},values),{},{subs:[],category:e.target.value}));getCategorySubs(e.target.value).then(function(res){console.log(\"SUB OPTIONS ON CATGORY CLICK\",res);setSubOptions(res.data);});setShowSub(true);};return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(AdminNav,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-10\",children:[loading?/*#__PURE__*/_jsx(LoadingOutlined,{className:\"text-danger h1\"}):/*#__PURE__*/_jsx(\"h4\",{children:\"Product create\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"p-3\",children:/*#__PURE__*/_jsx(FileUpload,{values:values,setValues:setValues,setLoading:setLoading})}),/*#__PURE__*/_jsx(ProductCreateForm,{handleSubmit:handleSubmit,handleChange:handleChange,setValues:setValues,values:values,handleCatagoryChange:handleCatagoryChange,subOptions:subOptions,showSub:showSub})]})]})});};export default ProductCreate;","map":{"version":3,"sources":["F:/mern/udemy/ecommerce/client/src/pages/admin/product/ProductCreate.js"],"names":["React","useState","useEffect","AdminNav","toast","useSelector","createProduct","ProductCreateForm","getCategories","getCategorySubs","FileUpload","LoadingOutlined","initialState","title","description","price","categories","category","subs","shipping","quantity","images","colors","brands","color","brand","ProductCreate","values","setValues","subOptions","setSubOptions","showSub","setShowSub","loading","setLoading","state","user","loadCategories","then","c","data","handleSubmit","e","preventDefault","token","res","console","log","window","alert","location","reload","catch","err","error","response","handleChange","target","name","value","handleCatagoryChange"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport AdminNav from \"../../../components/nav/AdminNav\";\nimport { toast } from \"react-toastify\";\nimport { useSelector } from \"react-redux\";\nimport { createProduct } from \"../../../functions/product\";\nimport ProductCreateForm from \"../../../components/forms/ProductCreateForm\";\nimport { getCategories, getCategorySubs } from \"../../../functions/category\";\nimport FileUpload from \"../../../components/forms/FileUpload\";\nimport { LoadingOutlined } from \"@ant-design/icons\";\n\nconst initialState = {\n  title: \"Macbook Pro\",\n  description: \"This is the best Apple product\",\n  price: \"45000\",\n  categories: [],\n  category: \"\",\n  subs: [],\n  shipping: \"Yes\",\n  quantity: \"50\",\n  images: [\n    // {\n    //   public_id: \"jwrzeubemmypod99e8lz\",\n    //   url:\n    //     \"https://res.cloudinary.com/dcqjrwaoi/image/upload/v1599480909/jwrzeubemmypod99e8lz.jpg\",\n    // },\n    // {\n    //   public_id: \"j7uerlvhog1eic0oyize\",\n    //   url:\n    //     \"https://res.cloudinary.com/dcqjrwaoi/image/upload/v1599480912/j7uerlvhog1eic0oyize.jpg\",\n    // },\n    // {\n    //   public_id: \"ho6wnp7sugyemnmtoogf\",\n    //   url:\n    //     \"https://res.cloudinary.com/dcqjrwaoi/image/upload/v1599480913/ho6wnp7sugyemnmtoogf.jpg\",\n    // },\n  ],\n  colors: [\"Black\", \"Brown\", \"Silver\", \"White\", \"Blue\"],\n  brands: [\"Apple\", \"Samsung\", \"Microsoft\", \"Lenovo\", \"ASUS\"],\n  color: \"White\",\n  brand: \"Apple\",\n};\n\nconst ProductCreate = () => {\n  const [values, setValues] = useState(initialState);\n  const [subOptions, setSubOptions] = useState([]);\n  const [showSub, setShowSub] = useState(false);\n  const [loading, setLoading] = useState(false);\n\n  // redux\n  const { user } = useSelector((state) => ({ ...state }));\n\n  useEffect(() => {\n    loadCategories();\n  }, []);\n\n  const loadCategories = () =>\n    getCategories().then((c) => setValues({ ...values, categories: c.data }));\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    createProduct(values, user.token)\n      .then((res) => {\n        console.log(res);\n        window.alert(`\"${res.data.title}\" is created`);\n        window.location.reload();\n      })\n      .catch((err) => {\n        console.log(err);\n        // if (err.response.status === 400) toast.error(err.response.data);\n        toast.error(err.response.data.err);\n      });\n  };\n\n  const handleChange = (e) => {\n    setValues({ ...values, [e.target.name]: e.target.value });\n    // console.log(e.target.name, \" ----- \", e.target.value);\n  };\n\n  const handleCatagoryChange = (e) => {\n    e.preventDefault();\n    console.log(\"CLICKED CATEGORY\", e.target.value);\n    setValues({ ...values, subs: [], category: e.target.value });\n    getCategorySubs(e.target.value).then((res) => {\n      console.log(\"SUB OPTIONS ON CATGORY CLICK\", res);\n      setSubOptions(res.data);\n    });\n    setShowSub(true);\n  };\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-md-2\">\n          <AdminNav />\n        </div>\n\n        <div className=\"col-md-10\">\n          {loading ? (\n            <LoadingOutlined className=\"text-danger h1\" />\n          ) : (\n            <h4>Product create</h4>\n          )}\n          <hr />\n\n          {/* {JSON.stringify(values.images)} */}\n\n          <div className=\"p-3\">\n            <FileUpload\n              values={values}\n              setValues={setValues}\n              setLoading={setLoading}\n            />\n          </div>\n\n          <ProductCreateForm\n            handleSubmit={handleSubmit}\n            handleChange={handleChange}\n            setValues={setValues}\n            values={values}\n            handleCatagoryChange={handleCatagoryChange}\n            subOptions={subOptions}\n            showSub={showSub}\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProductCreate;\n"]},"metadata":{},"sourceType":"module"}