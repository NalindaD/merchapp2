{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"F:/mern/udemy/ecommerce/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"F:/mern/udemy/ecommerce/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useState,useEffect}from\"react\";import AdminNav from\"../../../components/nav/AdminNav\";import{toast}from\"react-toastify\";import{useSelector}from\"react-redux\";import{getCategory,updateCategory}from\"../../../functions/category\";import CategoryForm from\"../../../components/forms/CategoryForm\";var CategoryUpdate=function CategoryUpdate(_ref){var history=_ref.history,match=_ref.match;var _useSelector=useSelector(function(state){return _objectSpread({},state);}),user=_useSelector.user;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];useEffect(function(){loadCategory();},[]);var loadCategory=function loadCategory(){return getCategory(match.params.slug).then(function(c){return setName(c.data.name);});};var handleSubmit=function handleSubmit(e){e.preventDefault();// console.log(name);\nsetLoading(true);updateCategory(match.params.slug,{name:name},user.token).then(function(res){// console.log(res)\nsetLoading(false);setName(\"\");toast.success(\"\\\"\".concat(res.data.name,\"\\\" is updated\"));history.push(\"/admin/category\");}).catch(function(err){console.log(err);setLoading(false);if(err.response.status===400)toast.error(err.response.data);});};return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(AdminNav,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[loading?/*#__PURE__*/_jsx(\"h4\",{className:\"text-danger\",children:\"Loading..\"}):/*#__PURE__*/_jsx(\"h4\",{children:\"Update category\"}),/*#__PURE__*/_jsx(CategoryForm,{handleSubmit:handleSubmit,name:name,setName:setName}),/*#__PURE__*/_jsx(\"hr\",{})]})]})});};export default CategoryUpdate;","map":{"version":3,"sources":["F:/mern/udemy/ecommerce/client/src/pages/admin/category/CategoryUpdate.js"],"names":["React","useState","useEffect","AdminNav","toast","useSelector","getCategory","updateCategory","CategoryForm","CategoryUpdate","history","match","state","user","name","setName","loading","setLoading","loadCategory","params","slug","then","c","data","handleSubmit","e","preventDefault","token","res","success","push","catch","err","console","log","response","status","error"],"mappings":"iYAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,QAAP,KAAqB,kCAArB,CACA,OAASC,KAAT,KAAsB,gBAAtB,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,WAAT,CAAsBC,cAAtB,KAA4C,6BAA5C,CACA,MAAOC,CAAAA,YAAP,KAAyB,wCAAzB,CAEA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,MAAwB,IAArBC,CAAAA,OAAqB,MAArBA,OAAqB,CAAZC,KAAY,MAAZA,KAAY,kBAC5BN,WAAW,CAAC,SAACO,KAAD,0BAAiBA,KAAjB,GAAD,CADiB,CACrCC,IADqC,cACrCA,IADqC,eAGrBZ,QAAQ,CAAC,EAAD,CAHa,wCAGtCa,IAHsC,eAGhCC,OAHgC,8BAIfd,QAAQ,CAAC,KAAD,CAJO,yCAItCe,OAJsC,eAI7BC,UAJ6B,eAM7Cf,SAAS,CAAC,UAAM,CACdgB,YAAY,GACb,CAFQ,CAEN,EAFM,CAAT,CAIA,GAAMA,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,SACnBZ,CAAAA,WAAW,CAACK,KAAK,CAACQ,MAAN,CAAaC,IAAd,CAAX,CAA+BC,IAA/B,CAAoC,SAACC,CAAD,QAAOP,CAAAA,OAAO,CAACO,CAAC,CAACC,IAAF,CAAOT,IAAR,CAAd,EAApC,CADmB,EAArB,CAGA,GAAMU,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAO,CAC1BA,CAAC,CAACC,cAAF,GACA;AACAT,UAAU,CAAC,IAAD,CAAV,CACAV,cAAc,CAACI,KAAK,CAACQ,MAAN,CAAaC,IAAd,CAAoB,CAAEN,IAAI,CAAJA,IAAF,CAApB,CAA8BD,IAAI,CAACc,KAAnC,CAAd,CACGN,IADH,CACQ,SAACO,GAAD,CAAS,CACb;AACAX,UAAU,CAAC,KAAD,CAAV,CACAF,OAAO,CAAC,EAAD,CAAP,CACAX,KAAK,CAACyB,OAAN,aAAkBD,GAAG,CAACL,IAAJ,CAAST,IAA3B,mBACAJ,OAAO,CAACoB,IAAR,CAAa,iBAAb,EACD,CAPH,EAQGC,KARH,CAQS,SAACC,GAAD,CAAS,CACdC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACAf,UAAU,CAAC,KAAD,CAAV,CACA,GAAIe,GAAG,CAACG,QAAJ,CAAaC,MAAb,GAAwB,GAA5B,CAAiChC,KAAK,CAACiC,KAAN,CAAYL,GAAG,CAACG,QAAJ,CAAaZ,IAAzB,EAClC,CAZH,EAaD,CAjBD,CAmBA,mBACE,YAAK,SAAS,CAAC,iBAAf,uBACE,aAAK,SAAS,CAAC,KAAf,wBACE,YAAK,SAAS,CAAC,UAAf,uBACE,KAAC,QAAD,IADF,EADF,cAIE,aAAK,SAAS,CAAC,KAAf,WACGP,OAAO,cACN,WAAI,SAAS,CAAC,aAAd,uBADM,cAGN,uCAJJ,cAOE,KAAC,YAAD,EACE,YAAY,CAAEQ,YADhB,CAEE,IAAI,CAAEV,IAFR,CAGE,OAAO,CAAEC,OAHX,EAPF,cAaE,aAbF,GAJF,GADF,EADF,CAwBD,CAxDD,CA0DA,cAAeN,CAAAA,cAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport AdminNav from \"../../../components/nav/AdminNav\";\nimport { toast } from \"react-toastify\";\nimport { useSelector } from \"react-redux\";\nimport { getCategory, updateCategory } from \"../../../functions/category\";\nimport CategoryForm from \"../../../components/forms/CategoryForm\";\n\nconst CategoryUpdate = ({ history, match }) => {\n  const { user } = useSelector((state) => ({ ...state }));\n\n  const [name, setName] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    loadCategory();\n  }, []);\n\n  const loadCategory = () =>\n    getCategory(match.params.slug).then((c) => setName(c.data.name));\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    // console.log(name);\n    setLoading(true);\n    updateCategory(match.params.slug, { name }, user.token)\n      .then((res) => {\n        // console.log(res)\n        setLoading(false);\n        setName(\"\");\n        toast.success(`\"${res.data.name}\" is updated`);\n        history.push(\"/admin/category\");\n      })\n      .catch((err) => {\n        console.log(err);\n        setLoading(false);\n        if (err.response.status === 400) toast.error(err.response.data);\n      });\n  };\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-md-2\">\n          <AdminNav />\n        </div>\n        <div className=\"col\">\n          {loading ? (\n            <h4 className=\"text-danger\">Loading..</h4>\n          ) : (\n            <h4>Update category</h4>\n          )}\n\n          <CategoryForm\n            handleSubmit={handleSubmit}\n            name={name}\n            setName={setName}\n          />\n\n          <hr />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CategoryUpdate;\n"]},"metadata":{},"sourceType":"module"}