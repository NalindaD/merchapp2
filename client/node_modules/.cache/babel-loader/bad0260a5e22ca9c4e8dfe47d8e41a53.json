{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _objectSpread from\"F:/mern/udemy/ecommerce/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{Link}from\"react-router-dom\";import ProductCardInCheckout from\"../components/cards/ProductCardInCheckout\";import{userCart}from\"../functions/user\";var Cart=function Cart(_ref){var history=_ref.history;var _useSelector=useSelector(function(state){return _objectSpread({},state);}),cart=_useSelector.cart,user=_useSelector.user;var dispatch=useDispatch();var getTotal=function getTotal(){return cart.reduce(function(currentValue,nextValue){return currentValue+nextValue.count*nextValue.price;},0);};var saveOrderToDb=function saveOrderToDb(){// console.log(\"cart\", JSON.stringify(cart, null, 4));\nuserCart(cart,user.token).then(function(res){console.log(\"CART POST RES\",res);if(res.data.ok)history.push(\"/checkout\");}).catch(function(err){return console.log(\"cart save err\",err);});};var showCartItems=function showCartItems(){return/*#__PURE__*/_jsxs(\"table\",{className:\"table table-bordered\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"thead-light\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Image\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Title\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Brand\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Color\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Count\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Shipping\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Remove\"})]})}),cart.map(function(p){return/*#__PURE__*/_jsx(ProductCardInCheckout,{p:p},p._id);})]});};return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid pt-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-8\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Cart / \",cart.length,\" Product\"]}),!cart.length?/*#__PURE__*/_jsxs(\"p\",{children:[\"No products in cart. \",/*#__PURE__*/_jsx(Link,{to:\"/shop\",children:\"Continue Shopping.\"})]}):showCartItems()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Order Summary\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"p\",{children:\"Products\"}),cart.map(function(c,i){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[c.title,\" x \",c.count,\" = $\",c.price*c.count]})},i);}),/*#__PURE__*/_jsx(\"hr\",{}),\"Total: \",/*#__PURE__*/_jsxs(\"b\",{children:[\"$\",getTotal()]}),/*#__PURE__*/_jsx(\"hr\",{}),user?/*#__PURE__*/_jsx(\"button\",{onClick:saveOrderToDb,className:\"btn btn-sm btn-primary mt-2\",disabled:!cart.length,children:\"Proceed to Checkout\"}):/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-primary mt-2\",children:/*#__PURE__*/_jsx(Link,{to:{pathname:\"/login\",state:{from:\"cart\"}},children:\"Login to Checkout\"})})]})]})});};export default Cart;","map":{"version":3,"sources":["F:/mern/udemy/ecommerce/client/src/pages/Cart.js"],"names":["React","useSelector","useDispatch","Link","ProductCardInCheckout","userCart","Cart","history","state","cart","user","dispatch","getTotal","reduce","currentValue","nextValue","count","price","saveOrderToDb","token","then","res","console","log","data","ok","push","catch","err","showCartItems","map","p","_id","length","c","i","title","pathname","from"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport ProductCardInCheckout from \"../components/cards/ProductCardInCheckout\";\nimport { userCart } from \"../functions/user\";\n\nconst Cart = ({ history }) => {\n  const { cart, user } = useSelector((state) => ({ ...state }));\n  const dispatch = useDispatch();\n\n  const getTotal = () => {\n    return cart.reduce((currentValue, nextValue) => {\n      return currentValue + nextValue.count * nextValue.price;\n    }, 0);\n  };\n\n  const saveOrderToDb = () => {\n    // console.log(\"cart\", JSON.stringify(cart, null, 4));\n    userCart(cart, user.token)\n      .then((res) => {\n        console.log(\"CART POST RES\", res);\n        if (res.data.ok) history.push(\"/checkout\");\n      })\n      .catch((err) => console.log(\"cart save err\", err));\n  };\n\n  const showCartItems = () => (\n    <table className=\"table table-bordered\">\n      <thead className=\"thead-light\">\n        <tr>\n          <th scope=\"col\">Image</th>\n          <th scope=\"col\">Title</th>\n          <th scope=\"col\">Price</th>\n          <th scope=\"col\">Brand</th>\n          <th scope=\"col\">Color</th>\n          <th scope=\"col\">Count</th>\n          <th scope=\"col\">Shipping</th>\n          <th scope=\"col\">Remove</th>\n        </tr>\n      </thead>\n\n      {cart.map((p) => (\n        <ProductCardInCheckout key={p._id} p={p} />\n      ))}\n    </table>\n  );\n\n  return (\n    <div className=\"container-fluid pt-2\">\n      <div className=\"row\">\n        <div className=\"col-md-8\">\n          <h4>Cart / {cart.length} Product</h4>\n\n          {!cart.length ? (\n            <p>\n              No products in cart. <Link to=\"/shop\">Continue Shopping.</Link>\n            </p>\n          ) : (\n            showCartItems()\n          )}\n        </div>\n        <div className=\"col-md-4\">\n          <h4>Order Summary</h4>\n          <hr />\n          <p>Products</p>\n          {cart.map((c, i) => (\n            <div key={i}>\n              <p>\n                {c.title} x {c.count} = ${c.price * c.count}\n              </p>\n            </div>\n          ))}\n          <hr />\n          Total: <b>${getTotal()}</b>\n          <hr />\n          {user ? (\n            <button\n              onClick={saveOrderToDb}\n              className=\"btn btn-sm btn-primary mt-2\"\n              disabled={!cart.length}\n            >\n              Proceed to Checkout\n            </button>\n          ) : (\n            <button className=\"btn btn-sm btn-primary mt-2\">\n              <Link\n                to={{\n                  pathname: \"/login\",\n                  state: { from: \"cart\" },\n                }}\n              >\n                Login to Checkout\n              </Link>\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Cart;\n"]},"metadata":{},"sourceType":"module"}