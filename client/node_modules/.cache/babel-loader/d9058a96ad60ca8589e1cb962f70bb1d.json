{"ast":null,"code":"import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"F:/mern/udemy/ecommerce/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"F:/mern/udemy/ecommerce/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"F:/mern/udemy/ecommerce/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import React,{useEffect,useState}from\"react\";import{Route}from\"react-router-dom\";import{useSelector}from\"react-redux\";import LoadingToRedirect from\"./LoadingToRedirect\";import{currentAdmin}from\"../../functions/auth\";var AdminRoute=function AdminRoute(_ref){var children=_ref.children,rest=_objectWithoutProperties(_ref,[\"children\"]);var _useSelector=useSelector(function(state){return _objectSpread({},state);}),user=_useSelector.user;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),ok=_useState2[0],setOk=_useState2[1];useEffect(function(){if(user&&user.token){currentAdmin(user.token).then(function(res){console.log(\"CURRENT ADMIN RES\",res);setOk(true);}).catch(function(err){console.log(\"ADMIN ROUTE ERR\",err);setOk(false);});}},[user]);return ok?/*#__PURE__*/_jsx(Route,_objectSpread({},rest)):/*#__PURE__*/_jsx(LoadingToRedirect,{});};export default AdminRoute;","map":{"version":3,"sources":["F:/mern/udemy/ecommerce/client/src/components/routes/AdminRoute.js"],"names":["React","useEffect","useState","Route","useSelector","LoadingToRedirect","currentAdmin","AdminRoute","children","rest","state","user","ok","setOk","token","then","res","console","log","catch","err"],"mappings":"6fAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,KAAT,KAAsB,kBAAtB,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,MAAOC,CAAAA,iBAAP,KAA8B,qBAA9B,CACA,OAASC,YAAT,KAA6B,sBAA7B,CAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,MAA2B,IAAxBC,CAAAA,QAAwB,MAAxBA,QAAwB,CAAXC,IAAW,8DAC3BL,WAAW,CAAC,SAACM,KAAD,0BAAiBA,KAAjB,GAAD,CADgB,CACpCC,IADoC,cACpCA,IADoC,eAExBT,QAAQ,CAAC,KAAD,CAFgB,wCAErCU,EAFqC,eAEjCC,KAFiC,eAI5CZ,SAAS,CAAC,UAAM,CACd,GAAIU,IAAI,EAAIA,IAAI,CAACG,KAAjB,CAAwB,CACtBR,YAAY,CAACK,IAAI,CAACG,KAAN,CAAZ,CACGC,IADH,CACQ,SAACC,GAAD,CAAS,CACbC,OAAO,CAACC,GAAR,CAAY,mBAAZ,CAAiCF,GAAjC,EACAH,KAAK,CAAC,IAAD,CAAL,CACD,CAJH,EAKGM,KALH,CAKS,SAACC,GAAD,CAAS,CACdH,OAAO,CAACC,GAAR,CAAY,iBAAZ,CAA+BE,GAA/B,EACAP,KAAK,CAAC,KAAD,CAAL,CACD,CARH,EASD,CACF,CAZQ,CAYN,CAACF,IAAD,CAZM,CAAT,CAcA,MAAOC,CAAAA,EAAE,cAAG,KAAC,KAAD,kBAAWH,IAAX,EAAH,cAAyB,KAAC,iBAAD,IAAlC,CACD,CAnBD,CAqBA,cAAeF,CAAAA,UAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Route } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport LoadingToRedirect from \"./LoadingToRedirect\";\nimport { currentAdmin } from \"../../functions/auth\";\n\nconst AdminRoute = ({ children, ...rest }) => {\n  const { user } = useSelector((state) => ({ ...state }));\n  const [ok, setOk] = useState(false);\n\n  useEffect(() => {\n    if (user && user.token) {\n      currentAdmin(user.token)\n        .then((res) => {\n          console.log(\"CURRENT ADMIN RES\", res);\n          setOk(true);\n        })\n        .catch((err) => {\n          console.log(\"ADMIN ROUTE ERR\", err);\n          setOk(false);\n        });\n    }\n  }, [user]);\n\n  return ok ? <Route {...rest} /> : <LoadingToRedirect />;\n};\n\nexport default AdminRoute;\n"]},"metadata":{},"sourceType":"module"}