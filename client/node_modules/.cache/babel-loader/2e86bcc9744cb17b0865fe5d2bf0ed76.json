{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"F:/mern/udemy/ecommerce/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"F:/mern/udemy/ecommerce/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"F:/mern/udemy/ecommerce/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"F:/mern/udemy/ecommerce/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useState,useEffect}from\"react\";import AdminNav from\"../../../components/nav/AdminNav\";import{toast}from\"react-toastify\";import{useSelector}from\"react-redux\";import{createCategory,getCategories,removeCategory}from\"../../../functions/category\";import{Link}from\"react-router-dom\";import{EditOutlined,DeleteOutlined}from\"@ant-design/icons\";import CategoryForm from\"../../../components/forms/CategoryForm\";import LocalSearch from\"../../../components/forms/LocalSearch\";var CategoryCreate=function CategoryCreate(){var _useSelector=useSelector(function(state){return _objectSpread({},state);}),user=_useSelector.user;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),categories=_useState6[0],setCategories=_useState6[1];// step 1\nvar _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),keyword=_useState8[0],setKeyword=_useState8[1];useEffect(function(){loadCategories();},[]);var loadCategories=function loadCategories(){return getCategories().then(function(c){return setCategories(c.data);});};var handleSubmit=function handleSubmit(e){e.preventDefault();// console.log(name);\nsetLoading(true);createCategory({name:name},user.token).then(function(res){// console.log(res)\nsetLoading(false);setName(\"\");toast.success(\"\\\"\".concat(res.data.name,\"\\\" is created\"));loadCategories();}).catch(function(err){console.log(err);setLoading(false);if(err.response.status===400)toast.error(err.response.data);});};var handleRemove=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(slug){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// let answer = window.confirm(\"Delete?\");\n// console.log(answer, slug);\nif(window.confirm(\"Delete?\")){setLoading(true);removeCategory(slug,user.token).then(function(res){setLoading(false);toast.error(\"\".concat(res.data.name,\" deleted\"));loadCategories();}).catch(function(err){if(err.response.status===400){setLoading(false);toast.error(err.response.data);}});}case 1:case\"end\":return _context.stop();}}},_callee);}));return function handleRemove(_x){return _ref.apply(this,arguments);};}();// step 4\nvar searched=function searched(keyword){return function(c){return c.name.toLowerCase().includes(keyword);};};return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(AdminNav,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[loading?/*#__PURE__*/_jsx(\"h4\",{className:\"text-danger\",children:\"Loading..\"}):/*#__PURE__*/_jsx(\"h4\",{children:\"Create category\"}),/*#__PURE__*/_jsx(CategoryForm,{handleSubmit:handleSubmit,name:name,setName:setName}),/*#__PURE__*/_jsx(LocalSearch,{keyword:keyword,setKeyword:setKeyword}),categories.filter(searched(keyword)).map(function(c){return/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-secondary\",children:[c.name,/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return handleRemove(c.slug);},className:\"btn btn-sm float-right\",children:/*#__PURE__*/_jsx(DeleteOutlined,{className:\"text-danger\"})}),/*#__PURE__*/_jsx(Link,{to:\"/admin/category/\".concat(c.slug),children:/*#__PURE__*/_jsx(\"span\",{className:\"btn btn-sm float-right\",children:/*#__PURE__*/_jsx(EditOutlined,{className:\"text-warning\"})})})]},c._id);})]})]})});};export default CategoryCreate;","map":{"version":3,"sources":["F:/mern/udemy/ecommerce/client/src/pages/admin/category/CategoryCreate.js"],"names":["React","useState","useEffect","AdminNav","toast","useSelector","createCategory","getCategories","removeCategory","Link","EditOutlined","DeleteOutlined","CategoryForm","LocalSearch","CategoryCreate","state","user","name","setName","loading","setLoading","categories","setCategories","keyword","setKeyword","loadCategories","then","c","data","handleSubmit","e","preventDefault","token","res","success","catch","err","console","log","response","status","error","handleRemove","slug","window","confirm","searched","toLowerCase","includes","filter","map","_id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport AdminNav from \"../../../components/nav/AdminNav\";\nimport { toast } from \"react-toastify\";\nimport { useSelector } from \"react-redux\";\nimport {\n  createCategory,\n  getCategories,\n  removeCategory,\n} from \"../../../functions/category\";\nimport { Link } from \"react-router-dom\";\nimport { EditOutlined, DeleteOutlined } from \"@ant-design/icons\";\nimport CategoryForm from \"../../../components/forms/CategoryForm\";\nimport LocalSearch from \"../../../components/forms/LocalSearch\";\n\nconst CategoryCreate = () => {\n  const { user } = useSelector((state) => ({ ...state }));\n\n  const [name, setName] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [categories, setCategories] = useState([]);\n  // step 1\n  const [keyword, setKeyword] = useState(\"\");\n\n  useEffect(() => {\n    loadCategories();\n  }, []);\n\n  const loadCategories = () =>\n    getCategories().then((c) => setCategories(c.data));\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    // console.log(name);\n    setLoading(true);\n    createCategory({ name }, user.token)\n      .then((res) => {\n        // console.log(res)\n        setLoading(false);\n        setName(\"\");\n        toast.success(`\"${res.data.name}\" is created`);\n        loadCategories();\n      })\n      .catch((err) => {\n        console.log(err);\n        setLoading(false);\n        if (err.response.status === 400) toast.error(err.response.data);\n      });\n  };\n\n  const handleRemove = async (slug) => {\n    // let answer = window.confirm(\"Delete?\");\n    // console.log(answer, slug);\n    if (window.confirm(\"Delete?\")) {\n      setLoading(true);\n      removeCategory(slug, user.token)\n        .then((res) => {\n          setLoading(false);\n          toast.error(`${res.data.name} deleted`);\n          loadCategories();\n        })\n        .catch((err) => {\n          if (err.response.status === 400) {\n            setLoading(false);\n            toast.error(err.response.data);\n          }\n        });\n    }\n  };\n\n  // step 4\n  const searched = (keyword) => (c) => c.name.toLowerCase().includes(keyword);\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-md-2\">\n          <AdminNav />\n        </div>\n        <div className=\"col\">\n          {loading ? (\n            <h4 className=\"text-danger\">Loading..</h4>\n          ) : (\n            <h4>Create category</h4>\n          )}\n\n          <CategoryForm\n            handleSubmit={handleSubmit}\n            name={name}\n            setName={setName}\n          />\n\n          {/* step 2 and step 3 */}\n          <LocalSearch keyword={keyword} setKeyword={setKeyword} />\n\n          {/* step 5 */}\n          {categories.filter(searched(keyword)).map((c) => (\n            <div className=\"alert alert-secondary\" key={c._id}>\n              {c.name}\n              <span\n                onClick={() => handleRemove(c.slug)}\n                className=\"btn btn-sm float-right\"\n              >\n                <DeleteOutlined className=\"text-danger\" />\n              </span>\n              <Link to={`/admin/category/${c.slug}`}>\n                <span className=\"btn btn-sm float-right\">\n                  <EditOutlined className=\"text-warning\" />\n                </span>\n              </Link>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CategoryCreate;\n"]},"metadata":{},"sourceType":"module"}