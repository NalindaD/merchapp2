{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _objectSpread from\"F:/mern/udemy/ecommerce/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"F:/mern/udemy/ecommerce/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import AdminNav from\"../../../components/nav/AdminNav\";import{getProductsByCount}from\"../../../functions/product\";import AdminProductCard from\"../../../components/cards/AdminProductCard\";import{removeProduct}from\"../../../functions/product\";import{useSelector}from\"react-redux\";import{toast}from\"react-toastify\";var AllProducts=function AllProducts(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];// redux\nvar _useSelector=useSelector(function(state){return _objectSpread({},state);}),user=_useSelector.user;useEffect(function(){loadAllProducts();},[]);var loadAllProducts=function loadAllProducts(){setLoading(true);getProductsByCount(100).then(function(res){setProducts(res.data);setLoading(false);}).catch(function(err){setLoading(false);console.log(err);});};var handleRemove=function handleRemove(slug){// let answer = window.confirm(\"Delete?\");\nif(window.confirm(\"Delete?\")){// console.log(\"send delete request\", slug);\nremoveProduct(slug,user.token).then(function(res){loadAllProducts();toast.error(\"\".concat(res.data.title,\" is deleted\"));}).catch(function(err){if(err.response.status===400)toast.error(err.response.data);console.log(err);});}};return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsx(AdminNav,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[loading?/*#__PURE__*/_jsx(\"h4\",{className:\"text-danger\",children:\"Loading...\"}):/*#__PURE__*/_jsx(\"h4\",{children:\"All Products\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:products.map(function(product){return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 pb-3\",children:/*#__PURE__*/_jsx(AdminProductCard,{product:product,handleRemove:handleRemove})},product._id);})})]})]})});};export default AllProducts;","map":{"version":3,"sources":["F:/mern/udemy/ecommerce/client/src/pages/admin/product/AllProducts.js"],"names":["React","useEffect","useState","AdminNav","getProductsByCount","AdminProductCard","removeProduct","useSelector","toast","AllProducts","products","setProducts","loading","setLoading","state","user","loadAllProducts","then","res","data","catch","err","console","log","handleRemove","slug","window","confirm","token","error","title","response","status","map","product","_id"],"mappings":"iYAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,QAAP,KAAqB,kCAArB,CACA,OAASC,kBAAT,KAAmC,4BAAnC,CACA,MAAOC,CAAAA,gBAAP,KAA6B,4CAA7B,CACA,OAASC,aAAT,KAA8B,4BAA9B,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,KAAT,KAAsB,gBAAtB,CAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,eACQP,QAAQ,CAAC,EAAD,CADhB,wCACjBQ,QADiB,eACPC,WADO,8BAEMT,QAAQ,CAAC,KAAD,CAFd,yCAEjBU,OAFiB,eAERC,UAFQ,eAGxB;AAHwB,iBAIPN,WAAW,CAAC,SAACO,KAAD,0BAAiBA,KAAjB,GAAD,CAJJ,CAIhBC,IAJgB,cAIhBA,IAJgB,CAMxBd,SAAS,CAAC,UAAM,CACde,eAAe,GAChB,CAFQ,CAEN,EAFM,CAAT,CAIA,GAAMA,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC5BH,UAAU,CAAC,IAAD,CAAV,CACAT,kBAAkB,CAAC,GAAD,CAAlB,CACGa,IADH,CACQ,SAACC,GAAD,CAAS,CACbP,WAAW,CAACO,GAAG,CAACC,IAAL,CAAX,CACAN,UAAU,CAAC,KAAD,CAAV,CACD,CAJH,EAKGO,KALH,CAKS,SAACC,GAAD,CAAS,CACdR,UAAU,CAAC,KAAD,CAAV,CACAS,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACD,CARH,EASD,CAXD,CAaA,GAAMG,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,IAAD,CAAU,CAC7B;AACA,GAAIC,MAAM,CAACC,OAAP,CAAe,SAAf,CAAJ,CAA+B,CAC7B;AACArB,aAAa,CAACmB,IAAD,CAAOV,IAAI,CAACa,KAAZ,CAAb,CACGX,IADH,CACQ,SAACC,GAAD,CAAS,CACbF,eAAe,GACfR,KAAK,CAACqB,KAAN,WAAeX,GAAG,CAACC,IAAJ,CAASW,KAAxB,iBACD,CAJH,EAKGV,KALH,CAKS,SAACC,GAAD,CAAS,CACd,GAAIA,GAAG,CAACU,QAAJ,CAAaC,MAAb,GAAwB,GAA5B,CAAiCxB,KAAK,CAACqB,KAAN,CAAYR,GAAG,CAACU,QAAJ,CAAaZ,IAAzB,EACjCG,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACD,CARH,EASD,CACF,CAdD,CAgBA,mBACE,YAAK,SAAS,CAAC,iBAAf,uBACE,aAAK,SAAS,CAAC,KAAf,wBACE,YAAK,SAAS,CAAC,UAAf,uBACE,KAAC,QAAD,IADF,EADF,cAKE,aAAK,SAAS,CAAC,KAAf,WACGT,OAAO,cACN,WAAI,SAAS,CAAC,aAAd,wBADM,cAGN,oCAJJ,cAME,YAAK,SAAS,CAAC,KAAf,UACGF,QAAQ,CAACuB,GAAT,CAAa,SAACC,OAAD,qBACZ,YAAuB,SAAS,CAAC,eAAjC,uBACE,KAAC,gBAAD,EACE,OAAO,CAAEA,OADX,CAEE,YAAY,CAAEV,YAFhB,EADF,EAAUU,OAAO,CAACC,GAAlB,CADY,EAAb,CADH,EANF,GALF,GADF,EADF,CA2BD,CAlED,CAoEA,cAAe1B,CAAAA,WAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport AdminNav from \"../../../components/nav/AdminNav\";\nimport { getProductsByCount } from \"../../../functions/product\";\nimport AdminProductCard from \"../../../components/cards/AdminProductCard\";\nimport { removeProduct } from \"../../../functions/product\";\nimport { useSelector } from \"react-redux\";\nimport { toast } from \"react-toastify\";\n\nconst AllProducts = () => {\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(false);\n  // redux\n  const { user } = useSelector((state) => ({ ...state }));\n\n  useEffect(() => {\n    loadAllProducts();\n  }, []);\n\n  const loadAllProducts = () => {\n    setLoading(true);\n    getProductsByCount(100)\n      .then((res) => {\n        setProducts(res.data);\n        setLoading(false);\n      })\n      .catch((err) => {\n        setLoading(false);\n        console.log(err);\n      });\n  };\n\n  const handleRemove = (slug) => {\n    // let answer = window.confirm(\"Delete?\");\n    if (window.confirm(\"Delete?\")) {\n      // console.log(\"send delete request\", slug);\n      removeProduct(slug, user.token)\n        .then((res) => {\n          loadAllProducts();\n          toast.error(`${res.data.title} is deleted`);\n        })\n        .catch((err) => {\n          if (err.response.status === 400) toast.error(err.response.data);\n          console.log(err);\n        });\n    }\n  };\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-md-2\">\n          <AdminNav />\n        </div>\n\n        <div className=\"col\">\n          {loading ? (\n            <h4 className=\"text-danger\">Loading...</h4>\n          ) : (\n            <h4>All Products</h4>\n          )}\n          <div className=\"row\">\n            {products.map((product) => (\n              <div key={product._id} className=\"col-md-4 pb-3\">\n                <AdminProductCard\n                  product={product}\n                  handleRemove={handleRemove}\n                />\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AllProducts;\n"]},"metadata":{},"sourceType":"module"}