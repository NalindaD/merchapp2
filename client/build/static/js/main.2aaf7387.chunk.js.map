{"version":3,"sources":["firebase.js","functions/auth.js","pages/auth/Login.js","pages/auth/Register.js","components/cards/Jumbotron.js","functions/product.js","images/laptop.png","functions/rating.js","components/cards/ProductCard.js","components/cards/LoadingCard.js","components/home/NewArrivals.js","components/home/BestSellers.js","functions/category.js","components/category/CategoryList.js","functions/sub.js","components/sub/SubList.js","pages/Home.js","components/forms/Search.js","components/nav/Header.js","components/drawer/SideDrawer.js","pages/auth/RegisterComplete.js","pages/auth/ForgotPassword.js","components/nav/UserNav.js","pages/user/History.js","components/routes/LoadingToRedirect.js","components/routes/UserRoute.js","components/routes/AdminRoute.js","pages/user/Password.js","pages/user/Wishlist.js","components/nav/AdminNav.js","pages/admin/AdminDashboard.js","components/nav/SellerNav.js","pages/seller/SellerDashboard.js","components/forms/CategoryForm.js","components/forms/LocalSearch.js","pages/admin/category/CategoryCreate.js","pages/admin/category/CategoryUpdate.js","pages/admin/sub/SubCreate.js","pages/admin/sub/SubUpdate.js","components/forms/ProductCreateForm.js","components/forms/FileUpload.js","pages/admin/product/ProductCreate.js","components/cards/AdminProductCard.js","pages/admin/product/AllProducts.js","components/forms/ProductUpdateForm.js","pages/admin/product/ProductUpdate.js","components/cards/ProductListItems.js","components/modal/RatingModal.js","components/cards/SingleProduct.js","pages/Product.js","pages/category/CategoryHome.js","pages/sub/SubHome.js","components/forms/Star.js","pages/Shop.js","components/cards/ProductCardInCheckout.js","functions/user.js","pages/Cart.js","pages/Checkout.js","functions/coupon.js","pages/admin/coupon/CreateCouponPage.js","pages/Payment.js","App.js","serviceWorker.js","reducers/cartReducer.js","reducers/index.js","reducers/userReducer.js","reducers/searchReducer.js","reducers/drawerReducer.js","reducers/couponReducer.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","auth","googleAuthProvider","GoogleAuthProvider","createOrUpdateUser","authtoken","a","axios","post","process","headers","currentUser","currentAdmin","Login","history","useState","email","setEmail","password","setPassword","loading","setLoading","user","useSelector","state","useEffect","location","token","push","dispatch","useDispatch","roleBasedRedirect","res","intended","from","data","role","handleSubmit","e","preventDefault","signInWithEmailAndPassword","result","getIdTokenResult","idTokenResult","then","type","payload","name","_id","catch","err","console","log","toast","error","message","googleLogin","signInWithPopup","className","onSubmit","value","onChange","target","placeholder","autoFocus","onClick","block","shape","icon","MailOutlined","size","disabled","length","GoogleOutlined","to","Register","config","url","handleCodeInApp","sendSignInLinkToEmail","success","window","localStorage","setItem","Jumbotron","text","options","strings","autoStart","loop","createProduct","product","getProductsByCount","count","get","removeProduct","slug","delete","getProduct","updateProduct","put","getProducts","sort","order","page","getProductsCount","productStar","productId","star","getRelated","fetchProductsByFilter","arg","showAverage","p","ratings","ratingsArray","total","map","r","reduce","n","starDimension","starSpacing","starRatedColor","rating","editing","Meta","Card","ProductCard","tooltip","setTooltip","cart","images","title","description","price","cover","src","laptop","style","height","objectFit","actions","EyeOutlined","getItem","JSON","parse","unique","_","uniqWith","isEqual","stringify","ShoppingCartOutlined","substring","LoadingCard","totalCards","i","active","cards","NewArrivals","products","setProducts","productsCount","setProductsCount","setPage","loadAllProducts","current","BestSellers","getCategories","getCategory","removeCategory","updateCategory","category","createCategory","getCategorySubs","CategoryList","categories","setCategories","c","getSubs","getSub","removeSub","updateSub","sub","createSub","SubList","subs","setSubs","s","Home","Search","search","useHistory","SearchOutlined","cursor","SubMenu","Menu","Item","Header","setCurrent","key","selectedKeys","mode","AppstoreOutlined","ShoppingOutlined","offset","UserAddOutlined","UserOutlined","SettingOutlined","split","LogoutOutlined","signOut","SideDrawer","drawer","imageStyle","width","placement","closable","onClose","visible","RegisterComplete","signInWithEmailLink","href","emailVerified","removeItem","updatePassword","ForgotPassword","sendPasswordResetEmail","UserNav","History","LoadingToRedirect","setCount","interval","setInterval","currentCount","clearInterval","UserRoute","children","rest","AdminRoute","ok","setOk","Password","Wishlist","AdminNav","AdminDashboard","SellerNav","SellerDashboard","CategoryForm","setName","required","LocalSearch","keyword","setKeyword","toLowerCase","CategoryCreate","loadCategories","handleRemove","confirm","response","status","filter","includes","searched","DeleteOutlined","EditOutlined","CategoryUpdate","match","loadCategory","params","SubCreate","setCategory","loadSubs","parent","SubUpdate","setParent","loadSub","selected","Option","Select","ProductCreateForm","handleChange","setValues","values","handleCatagoryChange","subOptions","showSub","quantity","shipping","colors","brands","color","brand","b","FileUpload","image","public_id","filteredImages","item","multiple","hidden","accept","files","allUploadedFiles","Resizer","imageFileResizer","uri","initialState","ProductCreate","setSubOptions","setShowSub","LoadingOutlined","alert","reload","AdminProductCard","AllProducts","ProductUpdateForm","handleCategoryChange","arrayOfSubs","setArrayOfSubs","selectedCategory","ProductUpdate","setSelectedCategory","loadProduct","arr","prev","ProductListItems","sold","RatingModal","modalVisible","setModalVisible","useParams","pathname","StarOutlined","centered","onOk","onCancel","TabPane","Tabs","SingleProduct","onStarClick","showArrows","autoPlay","infiniteLoop","Laptop","tab","HeartOutlined","numberOfStars","changeRating","isSelectable","Product","setProduct","related","setRelated","setStar","loadSingleProduct","existingRatingObject","find","ele","postedBy","toString","newRating","table","CategoryHome","SubHome","setSub","Star","starClick","starHoverColor","starEmptyColor","Shop","ItemGroup","setPrice","categoryIds","setCategoryIds","setBrand","setColor","setShipping","fetchProducts","delayed","setTimeout","query","clearTimeout","handleCheck","inTheState","justChecked","foundInTheState","indexOf","splice","handleStarClick","num","stars","handleSub","handleBrand","handleColor","handleShippingchange","defaultOpenKeys","DollarOutlined","tipFormatter","v","range","max","DownSquareOutlined","maringTop","checked","ProductCardInCheckout","small","large","CheckCircleOutlined","CloseCircleOutlined","CloseOutlined","userCart","getUserCart","emptyUserCart","saveUserAddress","address","applyCoupon","coupon","Cart","scope","currentValue","nextValue","Checkout","setTotal","setAddress","addressSaved","setAddressSaved","setCoupon","totalAfterDiscount","setTotalAfterDiscount","discountError","setDiscountError","cartTotal","saveAddressToDb","applyDiscountCoupon","theme","getCoupons","removeCoupon","couponId","createCoupon","CreateCouponPage","expiry","setExpiry","discount","setDiscount","coupons","setCoupons","loadAllCoupons","Date","date","toLocaleDateString","Payment","App","unsubscribe","onAuthStateChanged","exact","path","component","Boolean","hostname","rootReducer","combineReducers","action","store","createStore","composeWithDevTools","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.2aaf7387.chunk.js","sourcesContent":["import  firebase from \"firebase\";\n\n// Your web app's Firebase configuration\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAk-uMZHX4EXzzZtivo9AYtlrrb7ECf8DY\",\n  authDomain: \"ecommerce-39587.firebaseapp.com\",\n  projectId: \"ecommerce-39587\",\n  storageBucket: \"ecommerce-39587.appspot.com\",\n  messagingSenderId: \"36984775351\",\n  appId: \"1:36984775351:web:404288a105f1150dd6a332\"\n};\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\n\n// export\nexport const auth = firebase.auth();\nexport const googleAuthProvider = new firebase.auth.GoogleAuthProvider();\n\n","import axios from \"axios\";\n\nexport const createOrUpdateUser = async (authtoken) => {\n  return await axios.post(\n    `${process.env.REACT_APP_API}/create-or-update-user`,\n    {},\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n};\n\nexport const currentUser = async (authtoken) => {\n  return await axios.post(\n    `${process.env.REACT_APP_API}/current-user`,\n    {},\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n};\n\nexport const currentAdmin = async (authtoken) => {\n  return await axios.post(\n    `${process.env.REACT_APP_API}/current-admin`,\n    {},\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n};\n\nexport const currentSeller = async (authtoken) => {\n  return await axios.post(\n    `${process.env.REACT_APP_API}/current-Seller`,\n    {},\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n};\n","import React, { useState, useEffect } from \"react\";\nimport { auth, googleAuthProvider } from \"../../firebase\";\nimport { toast } from \"react-toastify\";\nimport { Button } from \"antd\";\nimport { MailOutlined, GoogleOutlined } from \"@ant-design/icons\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { createOrUpdateUser } from \"../../functions/auth\";\n\nconst Login = ({ history }) => {\n  const [email, setEmail] = useState(\"n.dissanayaka424@gmail.com\");\n  const [password, setPassword] = useState(\"123456\");\n  const [loading, setLoading] = useState(false);\n\n  const { user } = useSelector((state) => ({ ...state }));\n\n  useEffect(() => {\n    let intended = history.location.state;\n    if (intended) {\n      return;\n    } else {\n      if (user && user.token) history.push(\"/\");\n    }\n  }, [user, history]);\n\n  let dispatch = useDispatch();\n\n  const roleBasedRedirect = (res) => {\n    // check if intended\n    let intended = history.location.state;\n    if (intended) {\n      history.push(intended.from);\n    } else {\n      if (res.data.role === \"admin\") {\n        history.push(\"/admin/dashboard\");\n      }else if(res.data.role === \"seller\"){\n        history.push(\"/seller/dashboard\");\n      } else {\n        history.push(\"/user/history\");\n      }\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    // console.table(email, password);\n    try {\n      const result = await auth.signInWithEmailAndPassword(email, password);\n      // console.log(result);\n      const { user } = result;\n      const idTokenResult = await user.getIdTokenResult();\n\n      createOrUpdateUser(idTokenResult.token)\n        .then((res) => {\n          dispatch({\n            type: \"LOGGED_IN_USER\",\n            payload: {\n              name: res.data.name,\n              email: res.data.email,\n              token: idTokenResult.token,\n              role: res.data.role,\n              _id: res.data._id,\n            },\n          });\n          roleBasedRedirect(res);\n        })\n        .catch((err) => console.log(err));\n\n      // history.push(\"/\");\n    } catch (error) {\n      console.log(error);\n      toast.error(error.message);\n      setLoading(false);\n    }\n  };\n\n  const googleLogin = async () => {\n    auth\n      .signInWithPopup(googleAuthProvider)\n      .then(async (result) => {\n        const { user } = result;\n        const idTokenResult = await user.getIdTokenResult();\n        createOrUpdateUser(idTokenResult.token)\n          .then((res) => {\n            dispatch({\n              type: \"LOGGED_IN_USER\",\n              payload: {\n                name: res.data.name,\n                email: res.data.email,\n                token: idTokenResult.token,\n                role: res.data.role,\n                _id: res.data._id,\n              },\n            });\n            roleBasedRedirect(res);\n          })\n          .catch((err) => console.log(err));\n        // history.push(\"/\");\n      })\n      .catch((err) => {\n        console.log(err);\n        toast.error(err.message);\n      });\n  };\n\n  const loginForm = () => (\n    <form onSubmit={handleSubmit}>\n      <div className=\"form-group\">\n        <input\n          type=\"email\"\n          className=\"form-control\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          placeholder=\"Your email\"\n          autoFocus\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <input\n          type=\"password\"\n          className=\"form-control\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          placeholder=\"Your password\"\n        />\n      </div>\n\n      <br />\n      <Button\n        onClick={handleSubmit}\n        type=\"primary\"\n        className=\"mb-3\"\n        block\n        shape=\"round\"\n        icon={<MailOutlined />}\n        size=\"large\"\n        disabled={!email || password.length < 6}\n      >\n        Login with Email/Password\n      </Button>\n    </form>\n  );\n\n  return (\n    <div className=\"container p-5\">\n      <div className=\"row\">\n        <div className=\"col-md-6 offset-md-3\">\n          {loading ? (\n            <h4 className=\"text-danger\">Loading...</h4>\n          ) : (\n            <h4>Login</h4>\n          )}\n          {loginForm()}\n\n          <Button\n            onClick={googleLogin}\n            type=\"danger\"\n            className=\"mb-3\"\n            block\n            shape=\"round\"\n            icon={<GoogleOutlined />}\n            size=\"large\"\n          >\n            Login with Google\n          </Button>\n\n          <Link to=\"/forgot/password\" className=\"float-right text-danger\">\n            Forgot Password\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n","import React, { useState, useEffect } from \"react\";\nimport { auth } from \"../../firebase\";\nimport { toast } from \"react-toastify\";\nimport { useSelector } from \"react-redux\";\n\nconst Register = ({ history }) => {\n  const [email, setEmail] = useState(\"\");\n\n  const { user } = useSelector((state) => ({ ...state }));\n\n  useEffect(() => {\n    if (user && user.token) history.push(\"/\");\n  }, [user, history]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    // console.log(\"ENV --->\", process.env.REACT_APP_REGISTER_REDIRECT_URL);\n    const config = {\n      url: process.env.REACT_APP_REGISTER_REDIRECT_URL,\n      handleCodeInApp: true,\n    };\n\n    await auth.sendSignInLinkToEmail(email, config);\n    toast.success(\n      `Email is sent to ${email}. Click the link to complete your registration.`\n    );\n    // save user email in local storage\n    window.localStorage.setItem(\"emailForRegistration\", email);\n    // clear state\n    setEmail(\"\");\n  };\n\n  const registerForm = () => (\n    <form onSubmit={handleSubmit}>\n      <input\n        type=\"email\"\n        className=\"form-control\"\n        value={email}\n        onChange={(e) => setEmail(e.target.value)}\n        placeholder=\"Your email\"\n        autoFocus\n      />\n\n      <br />\n      <button type=\"submit\" className=\"btn btn-raised\">\n        Register\n      </button>\n    </form>\n  );\n\n  return (\n    <div className=\"container p-5\">\n      <div className=\"row\">\n        <div className=\"col-md-6 offset-md-3\">\n          <h4>Register</h4>\n          {registerForm()}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Register;\n","import React from \"react\";\nimport Typewriter from \"typewriter-effect\";\n\nconst Jumbotron = ({ text }) => (\n  <Typewriter\n    options={{\n      strings: text,\n      autoStart: true,\n      loop: true,\n    }}\n  />\n);\n\nexport default Jumbotron;\n","import axios from \"axios\";\n\nexport const createProduct = async (product, authtoken) =>\n  await axios.post(`${process.env.REACT_APP_API}/product`, product, {\n    headers: {\n      authtoken,\n    },\n  });\n\nexport const getProductsByCount = async (count) =>\n  await axios.get(`${process.env.REACT_APP_API}/products/${count}`);\n\nexport const removeProduct = async (slug, authtoken) =>\n  await axios.delete(`${process.env.REACT_APP_API}/product/${slug}`, {\n    headers: {\n      authtoken,\n    },\n  });\n\nexport const getProduct = async (slug) =>\n  await axios.get(`${process.env.REACT_APP_API}/product/${slug}`);\n\nexport const updateProduct = async (slug, product, authtoken) =>\n  await axios.put(`${process.env.REACT_APP_API}/product/${slug}`, product, {\n    headers: {\n      authtoken,\n    },\n  });\n\nexport const getProducts = async (sort, order, page) =>\n  await axios.post(`${process.env.REACT_APP_API}/products`, {\n    sort,\n    order,\n    page,\n  });\n\nexport const getProductsCount = async () =>\n  await axios.get(`${process.env.REACT_APP_API}/products/total`);\n\nexport const productStar = async (productId, star, authtoken) =>\n  await axios.put(\n    `${process.env.REACT_APP_API}/product/star/${productId}`,\n    { star },\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n\nexport const getRelated = async (productId) =>\n  await axios.get(`${process.env.REACT_APP_API}/product/related/${productId}`);\n\nexport const fetchProductsByFilter = async (arg) =>\n  await axios.post(`${process.env.REACT_APP_API}/search/filters`, arg);\n","export default __webpack_public_path__ + \"static/media/laptop.db0a6ff4.png\";","import React from \"react\";\nimport StarRating from \"react-star-ratings\";\n\nexport const showAverage = (p) => {\n  if (p && p.ratings) {\n    let ratingsArray = p && p.ratings;\n    let total = [];\n    let length = ratingsArray.length;\n    // console.log(\"length\", length);\n\n    ratingsArray.map((r) => total.push(r.star));\n    let totalReduced = total.reduce((p, n) => p + n, 0);\n    // console.log(\"totalReduced\", totalReduced);\n\n    let highest = length * 5;\n    // console.log(\"highest\", highest);\n\n    let result = (totalReduced * 5) / highest;\n    // console.log(\"result\", result);\n\n    return (\n      <div className=\"text-center pt-1 pb-3\">\n        <span>\n          <StarRating\n            starDimension=\"20px\"\n            starSpacing=\"2px\"\n            starRatedColor=\"red\"\n            rating={result}\n            editing={false}\n          />{\" \"}\n          ({p.ratings.length})\n        </span>\n      </div>\n    );\n  }\n};\n","import React, { useState } from \"react\";\nimport { Card, Tooltip } from \"antd\";\nimport { EyeOutlined, ShoppingCartOutlined } from \"@ant-design/icons\";\nimport laptop from \"../../images/laptop.png\";\nimport { Link } from \"react-router-dom\";\nimport { showAverage } from \"../../functions/rating\";\nimport _ from \"lodash\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\nconst { Meta } = Card;\n\nconst ProductCard = ({ product }) => {\n  const [tooltip, setTooltip] = useState(\"Click to add\");\n\n  // redux\n  const { user, cart } = useSelector((state) => ({ ...state }));\n  const dispatch = useDispatch();\n\n  const handleAddToCart = () => {\n    // create cart array\n    let cart = [];\n    if (typeof window !== \"undefined\") {\n      // if cart is in local storage GET it\n      if (localStorage.getItem(\"cart\")) {\n        cart = JSON.parse(localStorage.getItem(\"cart\"));\n      }\n      // push new product to cart\n      cart.push({\n        ...product,\n        count: 1,\n      });\n      // remove duplicates\n      let unique = _.uniqWith(cart, _.isEqual);\n      // save to local storage\n      // console.log('unique', unique)\n      localStorage.setItem(\"cart\", JSON.stringify(unique));\n      // show tooltip\n      setTooltip(\"Added\");\n\n      // add to reeux state\n      dispatch({\n        type: \"ADD_TO_CART\",\n        payload: unique,\n      });\n      // show cart items in side drawer\n      dispatch({\n        type: \"SET_VISIBLE\",\n        payload: true,\n      });\n    }\n  };\n\n  // destructure\n  const { images, title, description, slug, price } = product;\n  return (\n    <>\n      {product && product.ratings && product.ratings.length > 0 ? (\n        showAverage(product)\n      ) : (\n        <div className=\"text-center pt-1 pb-3\">No rating yet</div>\n      )}\n\n      <Card\n        cover={\n          <img\n            src={images && images.length ? images[0].url : laptop}\n            style={{ height: \"150px\", objectFit: \"cover\" }}\n            className=\"p-1\"\n          />\n        }\n        actions={[\n          <Link to={`/product/${slug}`}>\n            <EyeOutlined className=\"text-warning\" /> <br /> View Product\n          </Link>,\n          <Tooltip title={tooltip}>\n            <a onClick={handleAddToCart}>\n              <ShoppingCartOutlined className=\"text-danger\" /> <br /> Add to\n              Cart\n            </a>\n          </Tooltip>,\n        ]}\n      >\n        <Meta\n          title={`${title} - $${price}`}\n          description={`${description && description.substring(0, 40)}...`}\n        />\n      </Card>\n    </>\n  );\n};\n\nexport default ProductCard;\n","import React from \"react\";\nimport { Card, Skeleton } from \"antd\";\n\nconst LoadingCard = ({ count }) => {\n  const cards = () => {\n    let totalCards = [];\n\n    for (let i = 0; i < count; i++) {\n      totalCards.push(\n        <Card className=\"col-md-4\" key={i}>\n          <Skeleton active></Skeleton>\n        </Card>\n      );\n    }\n\n    return totalCards;\n  };\n\n  return <div className=\"row pb-5\">{cards()}</div>;\n};\n\nexport default LoadingCard;\n","import React, { useEffect, useState } from \"react\";\nimport { getProducts, getProductsCount } from \"../../functions/product\";\nimport ProductCard from \"../cards/ProductCard\";\nimport LoadingCard from \"../cards/LoadingCard\";\nimport { Pagination } from \"antd\";\n\nconst NewArrivals = () => {\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [productsCount, setProductsCount] = useState(0);\n  const [page, setPage] = useState(1);\n\n  useEffect(() => {\n    loadAllProducts();\n  }, [page]);\n\n  useEffect(() => {\n    getProductsCount().then((res) => setProductsCount(res.data));\n  }, []);\n\n  const loadAllProducts = () => {\n    setLoading(true);\n    // sort, order, limit\n    getProducts(\"createdAt\", \"desc\", page).then((res) => {\n      setProducts(res.data);\n      setLoading(false);\n    });\n  };\n\n  return (\n    <>\n      <div className=\"container\">\n        {loading ? (\n          <LoadingCard count={3} />\n        ) : (\n          <div className=\"row\">\n            {products.map((product) => (\n              <div key={product._id} className=\"col-md-4\">\n                <ProductCard product={product} />\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      <div className=\"row\">\n        <nav className=\"col-md-4 offset-md-4 text-center pt-5 p-3\">\n          <Pagination\n            current={page}\n            total={(productsCount / 3) * 10}\n            onChange={(value) => setPage(value)}\n          />\n        </nav>\n      </div>\n    </>\n  );\n};\n\nexport default NewArrivals;\n","import React, { useEffect, useState } from \"react\";\nimport { getProducts, getProductsCount } from \"../../functions/product\";\nimport ProductCard from \"../cards/ProductCard\";\nimport LoadingCard from \"../cards/LoadingCard\";\nimport { Pagination } from \"antd\";\n\nconst BestSellers = () => {\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [productsCount, setProductsCount] = useState(0);\n  const [page, setPage] = useState(1);\n\n  useEffect(() => {\n    loadAllProducts();\n  }, [page]);\n\n  useEffect(() => {\n    getProductsCount().then((res) => setProductsCount(res.data));\n  }, []);\n\n  const loadAllProducts = () => {\n    setLoading(true);\n    // sort, order, limit\n    getProducts(\"sold\", \"desc\", page).then((res) => {\n      setProducts(res.data);\n      setLoading(false);\n    });\n  };\n\n  return (\n    <>\n      <div className=\"container\">\n        {loading ? (\n          <LoadingCard count={3} />\n        ) : (\n          <div className=\"row\">\n            {products.map((product) => (\n              <div key={product._id} className=\"col-md-4\">\n                <ProductCard product={product} />\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      <div className=\"row\">\n        <nav className=\"col-md-4 offset-md-4 text-center pt-5 p-3\">\n          <Pagination\n            current={page}\n            total={(productsCount / 3) * 10}\n            onChange={(value) => setPage(value)}\n          />\n        </nav>\n      </div>\n    </>\n  );\n};\n\nexport default BestSellers;\n","import axios from \"axios\";\n\nexport const getCategories = async () =>\n  await axios.get(`${process.env.REACT_APP_API}/categories`);\n\nexport const getCategory = async (slug) =>\n  await axios.get(`${process.env.REACT_APP_API}/category/${slug}`);\n\nexport const removeCategory = async (slug, authtoken) =>\n  await axios.delete(`${process.env.REACT_APP_API}/category/${slug}`, {\n    headers: {\n      authtoken,\n    },\n  });\n\nexport const updateCategory = async (slug, category, authtoken) =>\n  await axios.put(`${process.env.REACT_APP_API}/category/${slug}`, category, {\n    headers: {\n      authtoken,\n    },\n  });\n\nexport const createCategory = async (category, authtoken) =>\n  await axios.post(`${process.env.REACT_APP_API}/category`, category, {\n    headers: {\n      authtoken,\n    },\n  });\n\nexport const getCategorySubs = async (_id) =>\n  await axios.get(`${process.env.REACT_APP_API}/category/subs/${_id}`);\n","import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { getCategories } from \"../../functions/category\";\n\nconst CategoryList = () => {\n  const [categories, setCategories] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    setLoading(true);\n    getCategories().then((c) => {\n      setCategories(c.data);\n      setLoading(false);\n    });\n  }, []);\n\n  const showCategories = () =>\n    categories.map((c) => (\n      <div\n        key={c._id}\n        className=\"col btn btn-outlined-primary btn-lg btn-block btn-raised m-3\"\n      >\n        <Link to={`/category/${c.slug}`}>{c.name}</Link>\n      </div>\n    ));\n\n  return (\n    <div className=\"container\">\n      <div className=\"row\">\n        {loading ? (\n          <h4 className=\"text-center\">Loading...</h4>\n        ) : (\n          showCategories()\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default CategoryList;\n","import axios from \"axios\";\n\nexport const getSubs = async () =>\n  await axios.get(`${process.env.REACT_APP_API}/subs`);\n\nexport const getSub = async (slug) =>\n  await axios.get(`${process.env.REACT_APP_API}/sub/${slug}`);\n\nexport const removeSub = async (slug, authtoken) =>\n  await axios.delete(`${process.env.REACT_APP_API}/sub/${slug}`, {\n    headers: {\n      authtoken,\n    },\n  });\n\nexport const updateSub = async (slug, sub, authtoken) =>\n  await axios.put(`${process.env.REACT_APP_API}/sub/${slug}`, sub, {\n    headers: {\n      authtoken,\n    },\n  });\n\nexport const createSub = async (sub, authtoken) =>\n  await axios.post(`${process.env.REACT_APP_API}/sub`, sub, {\n    headers: {\n      authtoken,\n    },\n  });\n","import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { getSubs } from \"../../functions/sub\";\n\nconst SubList = () => {\n  const [subs, setSubs] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    setLoading(true);\n    getSubs().then((res) => {\n      setSubs(res.data);\n      setLoading(false);\n    });\n  }, []);\n\n  const showSubs = () =>\n    subs.map((s) => (\n      <div\n        key={s._id}\n        className=\"col btn btn-outlined-primary btn-lg btn-block btn-raised m-3\"\n      >\n        <Link to={`/sub/${s.slug}`}>{s.name}</Link>\n      </div>\n    ));\n\n  return (\n    <div className=\"container\">\n      <div className=\"row\">\n        {loading ? <h4 className=\"text-center\">Loading...</h4> : showSubs()}\n      </div>\n    </div>\n  );\n};\n\nexport default SubList;\n","import React from \"react\";\nimport Jumbotron from \"../components/cards/Jumbotron\";\nimport NewArrivals from \"../components/home/NewArrivals\";\nimport BestSellers from \"../components/home/BestSellers\";\nimport CategoryList from \"../components/category/CategoryList\";\nimport SubList from \"../components/sub/SubList\";\n\nconst Home = () => {\n  return (\n    <>\n      <div className=\"jumbotron text-danger h1 font-weight-bold text-center\">\n        <Jumbotron text={[\"Latest Products\", \"New Arrivals\", \"Best Sellers\"]} />\n      </div>\n\n      <h4 className=\"text-center p-3 mt-5 mb-5 display-4 jumbotron\">\n        New Arrivals\n      </h4>\n      <NewArrivals />\n\n      <h4 className=\"text-center p-3 mt-5 mb-5 display-4 jumbotron\">\n        Best Sellers\n      </h4>\n      <BestSellers />\n\n      <h4 className=\"text-center p-3 mt-5 mb-5 display-4 jumbotron\">\n        Categories\n      </h4>\n      <CategoryList />\n\n      <h4 className=\"text-center p-3 mt-5 mb-5 display-4 jumbotron\">\n        Sub Categories\n      </h4>\n      <SubList />\n\n      <br />\n      <br />\n    </>\n  );\n};\n\nexport default Home;\n","import React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { SearchOutlined } from \"@ant-design/icons\";\n\nconst Search = () => {\n  const dispatch = useDispatch();\n  const { search } = useSelector((state) => ({ ...state }));\n  const { text } = search;\n\n  const history = useHistory();\n\n  const handleChange = (e) => {\n    dispatch({\n      type: \"SEARCH_QUERY\",\n      payload: { text: e.target.value },\n    });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    history.push(`/shop?${text}`);\n  };\n\n  return (\n    <form className=\"form-inline my-2 my-lg-0\" onSubmit={handleSubmit}>\n      <input\n        onChange={handleChange}\n        type=\"search\"\n        value={text}\n        className=\"form-control mr-sm-2\"\n        placeholder=\"Search\"\n      />\n      <SearchOutlined onClick={handleSubmit} style={{ cursor: \"pointer\" }} />\n    </form>\n  );\n};\n\nexport default Search;\n","import React, { useState } from \"react\";\nimport { Menu, Badge } from \"antd\";\nimport {\n  AppstoreOutlined,\n  SettingOutlined,\n  UserOutlined,\n  UserAddOutlined,\n  LogoutOutlined,\n  ShoppingOutlined,\n  ShoppingCartOutlined,\n} from \"@ant-design/icons\";\nimport { Link } from \"react-router-dom\";\nimport firebase from \"firebase\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport Search from \"../forms/Search\";\n\nconst { SubMenu, Item } = Menu;\n\nconst Header = () => {\n  const [current, setCurrent] = useState(\"home\");\n\n  let dispatch = useDispatch();\n  let { user, cart } = useSelector((state) => ({ ...state }));\n\n  let history = useHistory();\n\n  const handleClick = (e) => {\n    // console.log(e.key);\n    setCurrent(e.key);\n  };\n\n  const logout = () => {\n    firebase.auth().signOut();\n    dispatch({\n      type: \"LOGOUT\",\n      payload: null,\n    });\n    history.push(\"/login\");\n  };\n\n  return (\n    <Menu onClick={handleClick} selectedKeys={[current]} mode=\"horizontal\">\n      <Item key=\"home\" icon={<AppstoreOutlined />}>\n        <Link to=\"/\">Home</Link>\n      </Item>\n\n      <Item key=\"shop\" icon={<ShoppingOutlined />}>\n        <Link to=\"/shop\">Shop</Link>\n      </Item>\n\n      <Item key=\"cart\" icon={<ShoppingCartOutlined />}>\n        <Link to=\"/cart\">\n          <Badge count={cart.length} offset={[9, 0]}>\n            Cart\n          </Badge>\n        </Link>\n      </Item>\n\n      {!user && (\n        <Item key=\"register\" icon={<UserAddOutlined />} className=\"float-right\">\n          <Link to=\"/register\">Register</Link>\n        </Item>\n      )}\n\n      {!user && (\n        <Item key=\"login\" icon={<UserOutlined />} className=\"float-right\">\n          <Link to=\"/login\">Login</Link>\n        </Item>\n      )}\n\n      {user && (\n        <SubMenu\n          icon={<SettingOutlined />}\n          title={user.email && user.email.split(\"@\")[0]}\n          className=\"float-right\"\n        >\n          {user && user.role === \"subscriber\" && (\n            <Item>\n              <Link to=\"/user/history\">Dashboard</Link>\n            </Item>\n          )}\n\n{user && user.role === \"admin\" && (\n            <Item>\n              <Link to=\"/admin/dashboard\">Dashboard</Link>\n            </Item>\n          )}\n\n{user && user.role === \"seller\" && (\n            <Item>\n              <Link to=\"/seller/dashboard\">Dashboard</Link>\n            </Item>\n          )}\n\n          <Item icon={<LogoutOutlined />} onClick={logout}>\n            Logout\n          </Item>\n        </SubMenu>\n      )}\n\n      <span className=\"float-right p-1\">\n        <Search />\n      </span>\n    </Menu>\n  );\n};\n\nexport default Header;\n","import React from \"react\";\nimport { Drawer, Button } from \"antd\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport laptop from \"../../images/laptop.png\";\n\nconst SideDrawer = () => {\n  const dispatch = useDispatch();\n  const { drawer, cart } = useSelector((state) => ({ ...state }));\n\n  const imageStyle = {\n    width: \"100%\",\n    height: \"50px\",\n    objectFit: \"cover\",\n  };\n\n  return (\n    <Drawer\n      className=\"text-center\"\n      title={`Cart / ${cart.length} Product`}\n      placement=\"right\"\n      closable={false}\n      onClose={() => {\n        dispatch({\n          type: \"SET_VISIBLE\",\n          payload: false,\n        });\n      }}\n      visible={drawer}\n    >\n      {cart.map((p) => (\n        <div key={p._id} className=\"row\">\n          <div className=\"col\">\n            {p.images[0] ? (\n              <>\n                <img src={p.images[0].url} style={imageStyle} />\n                <p className=\"text-center bg-secondary text-light\">\n                  {p.title} x {p.count}\n                </p>\n              </>\n            ) : (\n              <>\n                <img src={laptop} style={imageStyle} />\n                <p className=\"text-center bg-secondary text-light\">\n                  {p.title} x {p.count}\n                </p>\n              </>\n            )}\n          </div>\n        </div>\n      ))}\n\n      <Link to=\"/cart\">\n        <button\n          onClick={() =>\n            dispatch({\n              type: \"SET_VISIBLE\",\n              payload: false,\n            })\n          }\n          className=\"text-center btn btn-primary btn-raised btn-block\"\n        >\n          Go To Cart\n        </button>\n      </Link>\n    </Drawer>\n  );\n};\n\nexport default SideDrawer;\n","import React, { useState, useEffect } from \"react\";\nimport { auth } from \"../../firebase\";\nimport { toast } from \"react-toastify\";\nimport { useDispatch } from \"react-redux\";\nimport { createOrUpdateUser } from \"../../functions/auth\";\n\nconst RegisterComplete = ({ history }) => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  // const { user } = useSelector((state) => ({ ...state }));\n  let dispatch = useDispatch();\n\n  useEffect(() => {\n    setEmail(window.localStorage.getItem(\"emailForRegistration\"));\n    // console.log(window.location.href);\n    // console.log(window.localStorage.getItem(\"emailForRegistration\"));\n  }, [history]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    // validation\n    if (!email || !password) {\n      toast.error(\"Email and password is required\");\n      return;\n    }\n\n    if (password.length < 6) {\n      toast.error(\"Password must be at least 6 characters long\");\n      return;\n    }\n\n    try {\n      const result = await auth.signInWithEmailLink(\n        email,\n        window.location.href\n      );\n      //   console.log(\"RESULT\", result);\n      if (result.user.emailVerified) {\n        // remove user email fom local storage\n        window.localStorage.removeItem(\"emailForRegistration\");\n        // get user id token\n        let user = auth.currentUser;\n        await user.updatePassword(password);\n        const idTokenResult = await user.getIdTokenResult();\n        // redux store\n        console.log(\"user\", user, \"idTokenResult\", idTokenResult);\n\n        createOrUpdateUser(idTokenResult.token)\n          .then((res) => {\n            dispatch({\n              type: \"LOGGED_IN_USER\",\n              payload: {\n                name: res.data.name,\n                email: res.data.email,\n                token: idTokenResult.token,\n                role: res.data.role,\n                _id: res.data._id,\n              },\n            });\n          })\n          .catch((err) => console.log(err));\n\n        // redirect\n        history.push(\"/\");\n      }\n    } catch (error) {\n      console.log(error);\n      toast.error(error.message);\n    }\n  };\n\n  const completeRegistrationForm = () => (\n    <form onSubmit={handleSubmit}>\n      <input type=\"email\" className=\"form-control\" value={email} disabled />\n\n      <input\n        type=\"password\"\n        className=\"form-control\"\n        value={password}\n        onChange={(e) => setPassword(e.target.value)}\n        placeholder=\"Password\"\n        autoFocus\n      />\n      <br />\n      <button type=\"submit\" className=\"btn btn-raised\">\n        Complete Registration\n      </button>\n    </form>\n  );\n\n  return (\n    <div className=\"container p-5\">\n      <div className=\"row\">\n        <div className=\"col-md-6 offset-md-3\">\n          <h4>Register Complete</h4>\n          {completeRegistrationForm()}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default RegisterComplete;\n","import React, { useState, useEffect } from \"react\";\nimport { auth } from \"../../firebase\";\nimport { toast } from \"react-toastify\";\nimport { useSelector } from \"react-redux\";\n\nconst ForgotPassword = ({ history }) => {\n  const [email, setEmail] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const { user } = useSelector((state) => ({ ...state }));\n\n  useEffect(() => {\n    if (user && user.token) history.push(\"/\");\n  }, [user, history]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n\n    const config = {\n      url: process.env.REACT_APP_FORGOT_PASSWORD_REDIRECT,\n      handleCodeInApp: true,\n    };\n\n    await auth\n      .sendPasswordResetEmail(email, config)\n      .then(() => {\n        setEmail(\"\");\n        setLoading(false);\n        toast.success(\"Check your email for password reset link\");\n      })\n      .catch((error) => {\n        setLoading(false);\n        toast.error(error.message);\n        console.log(\"ERROR MSG IN FORGOT PASSWORD\", error);\n      });\n  };\n\n  return (\n    <div className=\"container col-md-6 offset-md-3 p-5\">\n      {loading ? (\n        <h4 className=\"text-danger\">Loading</h4>\n      ) : (\n        <h4>Forgot Password</h4>\n      )}\n\n      <form onSubmit={handleSubmit}>\n        <input\n          type=\"email\"\n          className=\"form-control\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          placeholder=\"Type your email\"\n          autoFocus\n        />\n        <br />\n        <button className=\"btn btn-raised\" disabled={!email}>\n          Submit\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport default ForgotPassword;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nconst UserNav = () => (\n  <nav>\n    <ul className=\"nav flex-column\">\n      <li className=\"nav-item\">\n        <Link to=\"/user/history\" className=\"nav-link\">\n          Historyh\n        </Link>\n      </li>\n\n      <li className=\"nav-item\">\n        <Link to=\"/user/password\" className=\"nav-link\">\n          Password\n        </Link>\n      </li>\n\n      <li className=\"nav-item\">\n        <Link to=\"/user/wishlist\" className=\"nav-link\">\n          Wishlist\n        </Link>\n      </li>\n    </ul>\n  </nav>\n);\n\nexport default UserNav;\n","import React from \"react\";\nimport UserNav from \"../../components/nav/UserNav\";\n\nconst History = () => (\n  <div className=\"container-fluid\">\n    <div className=\"row\">\n      <div className=\"col-md-2\">\n        <UserNav />\n      </div>\n      <div className=\"col\">user history page</div>\n    </div>\n  </div>\n);\n\nexport default History;\n","import React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nconst LoadingToRedirect = () => {\n  const [count, setCount] = useState(5);\n  let history = useHistory();\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setCount((currentCount) => --currentCount);\n    }, 1000);\n    // redirect once count is equal to 0\n    count === 0 && history.push(\"/\");\n    // cleanup\n    return () => clearInterval(interval);\n  }, [count, history]);\n\n  return (\n    <div className=\"container p-5 text-center\">\n      <p>Redirecting you in {count} seconds</p>\n    </div>\n  );\n};\n\nexport default LoadingToRedirect;\n","import React from \"react\";\nimport { Route } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport LoadingToRedirect from \"./LoadingToRedirect\";\n\nconst UserRoute = ({ children, ...rest }) => {\n  const { user } = useSelector((state) => ({ ...state }));\n\n  return user && user.token ? <Route {...rest} /> : <LoadingToRedirect />;\n};\n\nexport default UserRoute;\n","import React, { useEffect, useState } from \"react\";\nimport { Route } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport LoadingToRedirect from \"./LoadingToRedirect\";\nimport { currentAdmin } from \"../../functions/auth\";\n\nconst AdminRoute = ({ children, ...rest }) => {\n  const { user } = useSelector((state) => ({ ...state }));\n  const [ok, setOk] = useState(false);\n\n  useEffect(() => {\n    if (user && user.token) {\n      currentAdmin(user.token)\n        .then((res) => {\n          console.log(\"CURRENT ADMIN RES\", res);\n          setOk(true);\n        })\n        .catch((err) => {\n          console.log(\"ADMIN ROUTE ERR\", err);\n          setOk(false);\n        });\n    }\n  }, [user]);\n\n  return ok ? <Route {...rest} /> : <LoadingToRedirect />;\n};\n\nexport default AdminRoute;\n","import React, { useState } from \"react\";\nimport UserNav from \"../../components/nav/UserNav\";\nimport { auth } from \"../../firebase\";\nimport { toast } from \"react-toastify\";\n\nconst Password = () => {\n  const [password, setPassword] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    // console.log(password);\n\n    await auth.currentUser\n      .updatePassword(password)\n      .then(() => {\n        setLoading(false);\n        setPassword(\"\");\n        toast.success(\"Password updated\");\n      })\n      .catch((err) => {\n        setLoading(false);\n        toast.error(err.message);\n      });\n  };\n\n  const passwordUpdateForm = () => (\n    <form onSubmit={handleSubmit}>\n      <div className=\"form-group\">\n        <label>Your Password</label>\n        <input\n          type=\"password\"\n          onChange={(e) => setPassword(e.target.value)}\n          className=\"form-control\"\n          placeholder=\"Enter new password\"\n          disabled={loading}\n          value={password}\n        />\n        <button\n          className=\"btn btn-primary\"\n          disabled={!password || password.length < 6 || loading}\n        >\n          Submit\n        </button>\n      </div>\n    </form>\n  );\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-md-2\">\n          <UserNav />\n        </div>\n        <div className=\"col\">\n          {loading ? (\n            <h4 className=\"text-danger\">Loading..</h4>\n          ) : (\n            <h4>Password Update</h4>\n          )}\n          {passwordUpdateForm()}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Password;\n","import React from \"react\";\nimport UserNav from \"../../components/nav/UserNav\";\n\nconst Wishlist = () => (\n  <div className=\"container-fluid\">\n    <div className=\"row\">\n      <div className=\"col-md-2\">\n        <UserNav />\n      </div>\n      <div className=\"col\">user wishlist page</div>\n    </div>\n  </div>\n);\n\nexport default Wishlist;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nconst AdminNav = () => (\n  <nav>\n    <ul className=\"nav flex-column\">\n      <li className=\"nav-item\">\n        <Link to=\"/admin/dashboard\" className=\"nav-link\">\n          Dashboard\n        </Link>\n      </li>\n\n      <li className=\"nav-item\">\n        <Link to=\"/admin/product\" className=\"nav-link\">\n          Product\n        </Link>\n      </li>\n\n      <li className=\"nav-item\">\n        <Link to=\"/admin/products\" className=\"nav-link\">\n          Products\n        </Link>\n      </li>\n\n      <li className=\"nav-item\">\n        <Link to=\"/admin/category\" className=\"nav-link\">\n          Category\n        </Link>\n      </li>\n\n      <li className=\"nav-item\">\n        <Link to=\"/admin/sub\" className=\"nav-link\">\n          Sub Category\n        </Link>\n      </li>\n\n      <li className=\"nav-item\">\n        <Link to=\"/admin/coupon\" className=\"nav-link\">\n          Coupon\n        </Link>\n      </li>\n\n      <li className=\"nav-item\">\n        <Link to=\"/user/password\" className=\"nav-link\">\n          Password\n        </Link>\n      </li>\n    </ul>\n  </nav>\n);\n\nexport default AdminNav;\n","import React from \"react\";\nimport AdminNav from \"../../components/nav/AdminNav\";\n\nconst AdminDashboard = () => {\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-md-2\">\n          <AdminNav />\n        </div>\n\n        <div className=\"col\">\n          <h4>Admin Dashboard</h4>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AdminDashboard;\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst SellerNav = () => (\r\n  <nav>\r\n    <ul className=\"nav flex-column\">\r\n      <li className=\"nav-item\">\r\n        <Link to=\"/seller/history\" className=\"nav-link\">\r\n          seller History\r\n        </Link>\r\n      </li>\r\n\r\n      <li className=\"nav-item\">\r\n        <Link to=\"/seller/password\" className=\"nav-link\">\r\n          Password\r\n        </Link>\r\n      </li>\r\n\r\n      <li className=\"nav-item\">\r\n        <Link to=\"/seller/wishlist\" className=\"nav-link\">\r\n          Wishlist\r\n        </Link>\r\n      </li>\r\n    </ul>\r\n  </nav>\r\n);\r\n\r\nexport default SellerNav;\r\n","import React from \"react\";\nimport SellerNav from \"../../components/nav/SellerNav\";\n\nconst SellerDashboard = () => {\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-md-2\">\n          <SellerNav />\n        </div>\n\n        <div className=\"col\">\n          <h4>SellerDashboard</h4>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SellerDashboard;\n","import React from \"react\";\n\nconst CategoryForm = ({ handleSubmit, name, setName }) => (\n  <form onSubmit={handleSubmit}>\n    <div className=\"form-group\">\n      <label>Name</label>\n      <input\n        type=\"text\"\n        className=\"form-control\"\n        onChange={(e) => setName(e.target.value)}\n        value={name}\n        autoFocus\n        required\n      />\n      <br />\n      <button className=\"btn btn-outline-primary\">Save</button>\n    </div>\n  </form>\n);\n\nexport default CategoryForm;\n","import React from \"react\";\n\nconst LocalSearch = ({ keyword, setKeyword }) => {\n  const handleSearchChange = (e) => {\n    e.preventDefault();\n    setKeyword(e.target.value.toLowerCase());\n  };\n\n  return (\n    <input\n      type=\"search\"\n      placeholder=\"Filter\"\n      value={keyword}\n      onChange={handleSearchChange}\n      className=\"form-control mb-4\"\n    />\n  );\n};\n\nexport default LocalSearch;\n","import React, { useState, useEffect } from \"react\";\nimport AdminNav from \"../../../components/nav/AdminNav\";\nimport { toast } from \"react-toastify\";\nimport { useSelector } from \"react-redux\";\nimport {\n  createCategory,\n  getCategories,\n  removeCategory,\n} from \"../../../functions/category\";\nimport { Link } from \"react-router-dom\";\nimport { EditOutlined, DeleteOutlined } from \"@ant-design/icons\";\nimport CategoryForm from \"../../../components/forms/CategoryForm\";\nimport LocalSearch from \"../../../components/forms/LocalSearch\";\n\nconst CategoryCreate = () => {\n  const { user } = useSelector((state) => ({ ...state }));\n\n  const [name, setName] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [categories, setCategories] = useState([]);\n  // step 1\n  const [keyword, setKeyword] = useState(\"\");\n\n  useEffect(() => {\n    loadCategories();\n  }, []);\n\n  const loadCategories = () =>\n    getCategories().then((c) => setCategories(c.data));\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    // console.log(name);\n    setLoading(true);\n    createCategory({ name }, user.token)\n      .then((res) => {\n        // console.log(res)\n        setLoading(false);\n        setName(\"\");\n        toast.success(`\"${res.data.name}\" is created`);\n        loadCategories();\n      })\n      .catch((err) => {\n        console.log(err);\n        setLoading(false);\n        if (err.response.status === 400) toast.error(err.response.data);\n      });\n  };\n\n  const handleRemove = async (slug) => {\n    // let answer = window.confirm(\"Delete?\");\n    // console.log(answer, slug);\n    if (window.confirm(\"Delete?\")) {\n      setLoading(true);\n      removeCategory(slug, user.token)\n        .then((res) => {\n          setLoading(false);\n          toast.error(`${res.data.name} deleted`);\n          loadCategories();\n        })\n        .catch((err) => {\n          if (err.response.status === 400) {\n            setLoading(false);\n            toast.error(err.response.data);\n          }\n        });\n    }\n  };\n\n  // step 4\n  const searched = (keyword) => (c) => c.name.toLowerCase().includes(keyword);\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-md-2\">\n          <AdminNav />\n        </div>\n        <div className=\"col\">\n          {loading ? (\n            <h4 className=\"text-danger\">Loading..</h4>\n          ) : (\n            <h4>Create category</h4>\n          )}\n\n          <CategoryForm\n            handleSubmit={handleSubmit}\n            name={name}\n            setName={setName}\n          />\n\n          {/* step 2 and step 3 */}\n          <LocalSearch keyword={keyword} setKeyword={setKeyword} />\n\n          {/* step 5 */}\n          {categories.filter(searched(keyword)).map((c) => (\n            <div className=\"alert alert-secondary\" key={c._id}>\n              {c.name}\n              <span\n                onClick={() => handleRemove(c.slug)}\n                className=\"btn btn-sm float-right\"\n              >\n                <DeleteOutlined className=\"text-danger\" />\n              </span>\n              <Link to={`/admin/category/${c.slug}`}>\n                <span className=\"btn btn-sm float-right\">\n                  <EditOutlined className=\"text-warning\" />\n                </span>\n              </Link>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CategoryCreate;\n","import React, { useState, useEffect } from \"react\";\nimport AdminNav from \"../../../components/nav/AdminNav\";\nimport { toast } from \"react-toastify\";\nimport { useSelector } from \"react-redux\";\nimport { getCategory, updateCategory } from \"../../../functions/category\";\nimport CategoryForm from \"../../../components/forms/CategoryForm\";\n\nconst CategoryUpdate = ({ history, match }) => {\n  const { user } = useSelector((state) => ({ ...state }));\n\n  const [name, setName] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    loadCategory();\n  }, []);\n\n  const loadCategory = () =>\n    getCategory(match.params.slug).then((c) => setName(c.data.name));\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    // console.log(name);\n    setLoading(true);\n    updateCategory(match.params.slug, { name }, user.token)\n      .then((res) => {\n        // console.log(res)\n        setLoading(false);\n        setName(\"\");\n        toast.success(`\"${res.data.name}\" is updated`);\n        history.push(\"/admin/category\");\n      })\n      .catch((err) => {\n        console.log(err);\n        setLoading(false);\n        if (err.response.status === 400) toast.error(err.response.data);\n      });\n  };\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-md-2\">\n          <AdminNav />\n        </div>\n        <div className=\"col\">\n          {loading ? (\n            <h4 className=\"text-danger\">Loading..</h4>\n          ) : (\n            <h4>Update category</h4>\n          )}\n\n          <CategoryForm\n            handleSubmit={handleSubmit}\n            name={name}\n            setName={setName}\n          />\n\n          <hr />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CategoryUpdate;\n","import React, { useState, useEffect } from \"react\";\nimport AdminNav from \"../../../components/nav/AdminNav\";\nimport { toast } from \"react-toastify\";\nimport { useSelector } from \"react-redux\";\nimport { getCategories } from \"../../../functions/category\";\nimport { createSub, getSub, removeSub, getSubs } from \"../../../functions/sub\";\nimport { Link } from \"react-router-dom\";\nimport { EditOutlined, DeleteOutlined } from \"@ant-design/icons\";\nimport CategoryForm from \"../../../components/forms/CategoryForm\";\nimport LocalSearch from \"../../../components/forms/LocalSearch\";\n\nconst SubCreate = () => {\n  const { user } = useSelector((state) => ({ ...state }));\n\n  const [name, setName] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [categories, setCategories] = useState([]);\n  const [category, setCategory] = useState(\"\");\n  const [subs, setSubs] = useState([]);\n  // step 1\n  const [keyword, setKeyword] = useState(\"\");\n\n  useEffect(() => {\n    loadCategories();\n    loadSubs();\n  }, []);\n\n  const loadCategories = () =>\n    getCategories().then((c) => setCategories(c.data));\n\n  const loadSubs = () => getSubs().then((s) => setSubs(s.data));\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    // console.log(name);\n    setLoading(true);\n    createSub({ name, parent: category }, user.token)\n      .then((res) => {\n        // console.log(res)\n        setLoading(false);\n        setName(\"\");\n        toast.success(`\"${res.data.name}\" is created`);\n        loadSubs();\n      })\n      .catch((err) => {\n        console.log(err);\n        setLoading(false);\n        if (err.response.status === 400) toast.error(err.response.data);\n      });\n  };\n\n  const handleRemove = async (slug) => {\n    // let answer = window.confirm(\"Delete?\");\n    // console.log(answer, slug);\n    if (window.confirm(\"Delete?\")) {\n      setLoading(true);\n      removeSub(slug, user.token)\n        .then((res) => {\n          setLoading(false);\n          toast.error(`${res.data.name} deleted`);\n          loadSubs();\n        })\n        .catch((err) => {\n          if (err.response.status === 400) {\n            setLoading(false);\n            toast.error(err.response.data);\n          }\n        });\n    }\n  };\n\n  // step 4\n  const searched = (keyword) => (c) => c.name.toLowerCase().includes(keyword);\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-md-2\">\n          <AdminNav />\n        </div>\n        <div className=\"col\">\n          {loading ? (\n            <h4 className=\"text-danger\">Loading..</h4>\n          ) : (\n            <h4>Create sub category</h4>\n          )}\n\n          <div className=\"form-group\">\n            <label>Parent category</label>\n            <select\n              name=\"category\"\n              className=\"form-control\"\n              onChange={(e) => setCategory(e.target.value)}\n            >\n              <option>Please select</option>\n              {categories.length > 0 &&\n                categories.map((c) => (\n                  <option key={c._id} value={c._id}>\n                    {c.name}\n                  </option>\n                ))}\n            </select>\n          </div>\n\n          <CategoryForm\n            handleSubmit={handleSubmit}\n            name={name}\n            setName={setName}\n          />\n\n          {/* step 2 and step 3 */}\n          <LocalSearch keyword={keyword} setKeyword={setKeyword} />\n\n          {/* step 5 */}\n          {subs.filter(searched(keyword)).map((s) => (\n            <div className=\"alert alert-secondary\" key={s._id}>\n              {s.name}\n              <span\n                onClick={() => handleRemove(s.slug)}\n                className=\"btn btn-sm float-right\"\n              >\n                <DeleteOutlined className=\"text-danger\" />\n              </span>\n              <Link to={`/admin/sub/${s.slug}`}>\n                <span className=\"btn btn-sm float-right\">\n                  <EditOutlined className=\"text-warning\" />\n                </span>\n              </Link>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SubCreate;\n","import React, { useState, useEffect } from \"react\";\nimport AdminNav from \"../../../components/nav/AdminNav\";\nimport { toast } from \"react-toastify\";\nimport { useSelector } from \"react-redux\";\nimport { getCategories } from \"../../../functions/category\";\nimport { updateSub, getSub } from \"../../../functions/sub\";\nimport { Link } from \"react-router-dom\";\nimport { EditOutlined, DeleteOutlined } from \"@ant-design/icons\";\nimport CategoryForm from \"../../../components/forms/CategoryForm\";\nimport LocalSearch from \"../../../components/forms/LocalSearch\";\n\nconst SubUpdate = ({ match, history }) => {\n  const { user } = useSelector((state) => ({ ...state }));\n\n  const [name, setName] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [categories, setCategories] = useState([]);\n  const [parent, setParent] = useState(\"\");\n\n  useEffect(() => {\n    loadCategories();\n    loadSub();\n  }, []);\n\n  const loadCategories = () =>\n    getCategories().then((c) => setCategories(c.data));\n\n  const loadSub = () =>\n    getSub(match.params.slug).then((s) => {\n      setName(s.data.name);\n      setParent(s.data.parent);\n    });\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    // console.log(name);\n    setLoading(true);\n    updateSub(match.params.slug, { name, parent }, user.token)\n      .then((res) => {\n        // console.log(res)\n        setLoading(false);\n        setName(\"\");\n        toast.success(`\"${res.data.name}\" is updated`);\n        history.push(\"/admin/sub\");\n      })\n      .catch((err) => {\n        console.log(err);\n        setLoading(false);\n        if (err.response.status === 400) toast.error(err.response.data);\n      });\n  };\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-md-2\">\n          <AdminNav />\n        </div>\n        <div className=\"col\">\n          {loading ? (\n            <h4 className=\"text-danger\">Loading..</h4>\n          ) : (\n            <h4>Update sub category</h4>\n          )}\n\n          <div className=\"form-group\">\n            <label>Parent category</label>\n            <select\n              name=\"category\"\n              className=\"form-control\"\n              onChange={(e) => setParent(e.target.value)}\n            >\n              <option>Please select</option>\n              {categories.length > 0 &&\n                categories.map((c) => (\n                  <option key={c._id} value={c._id} selected={c._id === parent}>\n                    {c.name}\n                  </option>\n                ))}\n            </select>\n          </div>\n\n          <CategoryForm\n            handleSubmit={handleSubmit}\n            name={name}\n            setName={setName}\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SubUpdate;\n","import React from \"react\";\nimport { Select } from \"antd\";\n\nconst { Option } = Select;\n\nconst ProductCreateForm = ({\n  handleSubmit,\n  handleChange,\n  setValues,\n  values,\n  handleCatagoryChange,\n  subOptions,\n  showSub,\n}) => {\n  // destructure\n  const {\n    title,\n    description,\n    price,\n    categories,\n    category,\n    subs,\n    shipping,\n    quantity,\n    images,\n    colors,\n    brands,\n    color,\n    brand,\n  } = values;\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <div className=\"form-group\">\n        <label>Title</label>\n        <input\n          type=\"text\"\n          name=\"title\"\n          className=\"form-control\"\n          value={title}\n          onChange={handleChange}\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label>Description</label>\n        <input\n          type=\"text\"\n          name=\"description\"\n          className=\"form-control\"\n          value={description}\n          onChange={handleChange}\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label>Price</label>\n        <input\n          type=\"number\"\n          name=\"price\"\n          className=\"form-control\"\n          value={price}\n          onChange={handleChange}\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label>Shipping</label>\n        <select\n          name=\"shipping\"\n          className=\"form-control\"\n          onChange={handleChange}\n        >\n          <option>Please select</option>\n          <option value=\"No\">No</option>\n          <option value=\"Yes\">Yes</option>\n        </select>\n      </div>\n\n      <div className=\"form-group\">\n        <label>Quantity</label>\n        <input\n          type=\"number\"\n          name=\"quantity\"\n          className=\"form-control\"\n          value={quantity}\n          onChange={handleChange}\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label>Color</label>\n        <select name=\"color\" className=\"form-control\" onChange={handleChange}>\n          <option>Please select</option>\n          {colors.map((c) => (\n            <option key={c} value={c}>\n              {c}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      <div className=\"form-group\">\n        <label>Brand</label>\n        <select name=\"brand\" className=\"form-control\" onChange={handleChange}>\n          <option>Please select</option>\n          {brands.map((b) => (\n            <option key={b} value={b}>\n              {b}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      <div className=\"form-group\">\n        <label>Category</label>\n        <select\n          name=\"category\"\n          className=\"form-control\"\n          onChange={handleCatagoryChange}\n        >\n          <option>Please select</option>\n          {categories.length > 0 &&\n            categories.map((c) => (\n              <option key={c._id} value={c._id}>\n                {c.name}\n              </option>\n            ))}\n        </select>\n      </div>\n\n      {showSub && (\n        <div>\n          <label>Sub Categories</label>\n          <Select\n            mode=\"multiple\"\n            style={{ width: \"100%\" }}\n            placeholder=\"Please select\"\n            value={subs}\n            onChange={(value) => setValues({ ...values, subs: value })}\n          >\n            {subOptions.length &&\n              subOptions.map((s) => (\n                <Option key={s._id} value={s._id}>\n                  {s.name}\n                </Option>\n              ))}\n          </Select>\n        </div>\n      )}\n\n      <br />\n      <button className=\"btn btn-outline-info\">Save</button>\n    </form>\n  );\n};\n\nexport default ProductCreateForm;\n","import React from \"react\";\nimport Resizer from \"react-image-file-resizer\";\nimport axios from \"axios\";\nimport { useSelector } from \"react-redux\";\nimport { Avatar, Badge } from \"antd\";\n\nconst FileUpload = ({ values, setValues, setLoading }) => {\n  const { user } = useSelector((state) => ({ ...state }));\n\n  const fileUploadAndResize = (e) => {\n    // console.log(e.target.files);\n    // resize\n    let files = e.target.files; // 3\n    let allUploadedFiles = values.images;\n\n    if (files) {\n      setLoading(true);\n      for (let i = 0; i < files.length; i++) {\n        Resizer.imageFileResizer(\n          files[i],\n          720,\n          720,\n          \"JPEG\",\n          100,\n          0,\n          (uri) => {\n            // console.log(uri);\n            axios\n              .post(\n                `${process.env.REACT_APP_API}/uploadimages`,\n                { image: uri },\n                {\n                  headers: {\n                    authtoken: user ? user.token : \"\",\n                  },\n                }\n              )\n              .then((res) => {\n                console.log(\"IMAGE UPLOAD RES DATA\", res);\n                setLoading(false);\n                allUploadedFiles.push(res.data);\n\n                setValues({ ...values, images: allUploadedFiles });\n              })\n              .catch((err) => {\n                setLoading(false);\n                console.log(\"CLOUDINARY UPLOAD ERR\", err);\n              });\n          },\n          \"base64\"\n        );\n      }\n    }\n    // send back to server to upload to cloudinary\n    // set url to images[] in the parent component state - ProductCreate\n  };\n\n  const handleImageRemove = (public_id) => {\n    setLoading(true);\n    // console.log(\"remove image\", public_id);\n    axios\n      .post(\n        `${process.env.REACT_APP_API}/removeimage`,\n        { public_id },\n        {\n          headers: {\n            authtoken: user ? user.token : \"\",\n          },\n        }\n      )\n      .then((res) => {\n        setLoading(false);\n        const { images } = values;\n        let filteredImages = images.filter((item) => {\n          return item.public_id !== public_id;\n        });\n        setValues({ ...values, images: filteredImages });\n      })\n      .catch((err) => {\n        console.log(err);\n        setLoading(false);\n      });\n  };\n\n  return (\n    <>\n      <div className=\"row\">\n        {values.images &&\n          values.images.map((image) => (\n            <Badge\n              count=\"X\"\n              key={image.public_id}\n              onClick={() => handleImageRemove(image.public_id)}\n              style={{ cursor: \"pointer\" }}\n            >\n              <Avatar\n                src={image.url}\n                size={100}\n                shape=\"square\"\n                className=\"ml-3\"\n              />\n            </Badge>\n          ))}\n      </div>\n      <div className=\"row\">\n        <label className=\"btn btn-primary btn-raised mt-3\">\n          Choose File\n          <input\n            type=\"file\"\n            multiple\n            hidden\n            accept=\"images/*\"\n            onChange={fileUploadAndResize}\n          />\n        </label>\n      </div>\n    </>\n  );\n};\n\nexport default FileUpload;\n","import React, { useState, useEffect } from \"react\";\nimport AdminNav from \"../../../components/nav/AdminNav\";\nimport { toast } from \"react-toastify\";\nimport { useSelector } from \"react-redux\";\nimport { createProduct } from \"../../../functions/product\";\nimport ProductCreateForm from \"../../../components/forms/ProductCreateForm\";\nimport { getCategories, getCategorySubs } from \"../../../functions/category\";\nimport FileUpload from \"../../../components/forms/FileUpload\";\nimport { LoadingOutlined } from \"@ant-design/icons\";\n\nconst initialState = {\n  title: \"Macbook Pro\",\n  description: \"This is the best Apple product\",\n  price: \"45000\",\n  categories: [],\n  category: \"\",\n  subs: [],\n  shipping: \"Yes\",\n  quantity: \"50\",\n  images: [\n    // {\n    //   public_id: \"jwrzeubemmypod99e8lz\",\n    //   url:\n    //     \"https://res.cloudinary.com/dcqjrwaoi/image/upload/v1599480909/jwrzeubemmypod99e8lz.jpg\",\n    // },\n    // {\n    //   public_id: \"j7uerlvhog1eic0oyize\",\n    //   url:\n    //     \"https://res.cloudinary.com/dcqjrwaoi/image/upload/v1599480912/j7uerlvhog1eic0oyize.jpg\",\n    // },\n    // {\n    //   public_id: \"ho6wnp7sugyemnmtoogf\",\n    //   url:\n    //     \"https://res.cloudinary.com/dcqjrwaoi/image/upload/v1599480913/ho6wnp7sugyemnmtoogf.jpg\",\n    // },\n  ],\n  colors: [\"Black\", \"Brown\", \"Silver\", \"White\", \"Blue\"],\n  brands: [\"Apple\", \"Samsung\", \"Microsoft\", \"Lenovo\", \"ASUS\"],\n  color: \"White\",\n  brand: \"Apple\",\n};\n\nconst ProductCreate = () => {\n  const [values, setValues] = useState(initialState);\n  const [subOptions, setSubOptions] = useState([]);\n  const [showSub, setShowSub] = useState(false);\n  const [loading, setLoading] = useState(false);\n\n  // redux\n  const { user } = useSelector((state) => ({ ...state }));\n\n  useEffect(() => {\n    loadCategories();\n  }, []);\n\n  const loadCategories = () =>\n    getCategories().then((c) => setValues({ ...values, categories: c.data }));\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    createProduct(values, user.token)\n      .then((res) => {\n        console.log(res);\n        window.alert(`\"${res.data.title}\" is created`);\n        window.location.reload();\n      })\n      .catch((err) => {\n        console.log(err);\n        // if (err.response.status === 400) toast.error(err.response.data);\n        toast.error(err.response.data.err);\n      });\n  };\n\n  const handleChange = (e) => {\n    setValues({ ...values, [e.target.name]: e.target.value });\n    // console.log(e.target.name, \" ----- \", e.target.value);\n  };\n\n  const handleCatagoryChange = (e) => {\n    e.preventDefault();\n    console.log(\"CLICKED CATEGORY\", e.target.value);\n    setValues({ ...values, subs: [], category: e.target.value });\n    getCategorySubs(e.target.value).then((res) => {\n      console.log(\"SUB OPTIONS ON CATGORY CLICK\", res);\n      setSubOptions(res.data);\n    });\n    setShowSub(true);\n  };\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-md-2\">\n          <AdminNav />\n        </div>\n\n        <div className=\"col-md-10\">\n          {loading ? (\n            <LoadingOutlined className=\"text-danger h1\" />\n          ) : (\n            <h4>Product create</h4>\n          )}\n          <hr />\n\n          {/* {JSON.stringify(values.images)} */}\n\n          <div className=\"p-3\">\n            <FileUpload\n              values={values}\n              setValues={setValues}\n              setLoading={setLoading}\n            />\n          </div>\n\n          <ProductCreateForm\n            handleSubmit={handleSubmit}\n            handleChange={handleChange}\n            setValues={setValues}\n            values={values}\n            handleCatagoryChange={handleCatagoryChange}\n            subOptions={subOptions}\n            showSub={showSub}\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProductCreate;\n","import React from \"react\";\nimport { Card } from \"antd\";\nimport laptop from \"../../images/laptop.png\";\nimport { EditOutlined, DeleteOutlined } from \"@ant-design/icons\";\nimport { Link } from \"react-router-dom\";\n\nconst { Meta } = Card;\n\nconst AdminProductCard = ({ product, handleRemove }) => {\n  // destructure\n  const { title, description, images, slug } = product;\n\n  return (\n    <Card\n      cover={\n        <img\n          src={images && images.length ? images[0].url : laptop}\n          style={{ height: \"150px\", objectFit: \"cover\" }}\n          className=\"p-1\"\n        />\n      }\n      actions={[\n        <Link to={`/admin/product/${slug}`}>\n          <EditOutlined className=\"text-warning\" />\n        </Link>,\n        <DeleteOutlined\n          onClick={() => handleRemove(slug)}\n          className=\"text-danger\"\n        />,\n      ]}\n    >\n      <Meta\n        title={title}\n        description={`${description && description.substring(0, 40)}...`}\n      />\n    </Card>\n  );\n};\n\nexport default AdminProductCard;\n","import React, { useEffect, useState } from \"react\";\nimport AdminNav from \"../../../components/nav/AdminNav\";\nimport { getProductsByCount } from \"../../../functions/product\";\nimport AdminProductCard from \"../../../components/cards/AdminProductCard\";\nimport { removeProduct } from \"../../../functions/product\";\nimport { useSelector } from \"react-redux\";\nimport { toast } from \"react-toastify\";\n\nconst AllProducts = () => {\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(false);\n  // redux\n  const { user } = useSelector((state) => ({ ...state }));\n\n  useEffect(() => {\n    loadAllProducts();\n  }, []);\n\n  const loadAllProducts = () => {\n    setLoading(true);\n    getProductsByCount(100)\n      .then((res) => {\n        setProducts(res.data);\n        setLoading(false);\n      })\n      .catch((err) => {\n        setLoading(false);\n        console.log(err);\n      });\n  };\n\n  const handleRemove = (slug) => {\n    // let answer = window.confirm(\"Delete?\");\n    if (window.confirm(\"Delete?\")) {\n      // console.log(\"send delete request\", slug);\n      removeProduct(slug, user.token)\n        .then((res) => {\n          loadAllProducts();\n          toast.error(`${res.data.title} is deleted`);\n        })\n        .catch((err) => {\n          if (err.response.status === 400) toast.error(err.response.data);\n          console.log(err);\n        });\n    }\n  };\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-md-2\">\n          <AdminNav />\n        </div>\n\n        <div className=\"col\">\n          {loading ? (\n            <h4 className=\"text-danger\">Loading...</h4>\n          ) : (\n            <h4>All Products</h4>\n          )}\n          <div className=\"row\">\n            {products.map((product) => (\n              <div key={product._id} className=\"col-md-4 pb-3\">\n                <AdminProductCard\n                  product={product}\n                  handleRemove={handleRemove}\n                />\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AllProducts;\n","import React from \"react\";\nimport { Select } from \"antd\";\n\nconst { Option } = Select;\n\nconst ProductUpdateForm = ({\n  handleSubmit,\n  handleChange,\n  setValues,\n  values,\n  handleCategoryChange,\n  categories,\n  subOptions,\n  arrayOfSubs,\n  setArrayOfSubs,\n  selectedCategory,\n}) => {\n  // destructure\n  const {\n    title,\n    description,\n    price,\n    category,\n    subs,\n    shipping,\n    quantity,\n    images,\n    colors,\n    brands,\n    color,\n    brand,\n  } = values;\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <div className=\"form-group\">\n        <label>Title</label>\n        <input\n          type=\"text\"\n          name=\"title\"\n          className=\"form-control\"\n          value={title}\n          onChange={handleChange}\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label>Description</label>\n        <input\n          type=\"text\"\n          name=\"description\"\n          className=\"form-control\"\n          value={description}\n          onChange={handleChange}\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label>Price</label>\n        <input\n          type=\"number\"\n          name=\"price\"\n          className=\"form-control\"\n          value={price}\n          onChange={handleChange}\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label>Shipping</label>\n        <select\n          value={shipping === \"Yes\" ? \"Yes\" : \"No\"}\n          name=\"shipping\"\n          className=\"form-control\"\n          onChange={handleChange}\n        >\n          <option value=\"No\">No</option>\n          <option value=\"Yes\">Yes</option>\n        </select>\n      </div>\n\n      <div className=\"form-group\">\n        <label>Quantity</label>\n        <input\n          type=\"number\"\n          name=\"quantity\"\n          className=\"form-control\"\n          value={quantity}\n          onChange={handleChange}\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label>Color</label>\n        <select\n          value={color}\n          name=\"color\"\n          className=\"form-control\"\n          onChange={handleChange}\n        >\n          {colors.map((c) => (\n            <option key={c} value={c}>\n              {c}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      <div className=\"form-group\">\n        <label>Brand</label>\n        <select\n          value={brand}\n          name=\"brand\"\n          className=\"form-control\"\n          onChange={handleChange}\n        >\n          {brands.map((b) => (\n            <option key={b} value={b}>\n              {b}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      <div className=\"form-group\">\n        <label>Category</label>\n        <select\n          name=\"category\"\n          className=\"form-control\"\n          onChange={handleCategoryChange}\n          value={selectedCategory ? selectedCategory : category._id}\n        >\n          {categories.length > 0 &&\n            categories.map((c) => (\n              <option key={c._id} value={c._id}>\n                {c.name}\n              </option>\n            ))}\n        </select>\n      </div>\n\n      <div>\n        <label>Sub Categories</label>\n        <Select\n          mode=\"multiple\"\n          style={{ width: \"100%\" }}\n          placeholder=\"Please select\"\n          value={arrayOfSubs}\n          onChange={(value) => setArrayOfSubs(value)}\n        >\n          {subOptions.length &&\n            subOptions.map((s) => (\n              <Option key={s._id} value={s._id}>\n                {s.name}\n              </Option>\n            ))}\n        </Select>\n      </div>\n\n      <br />\n      <button className=\"btn btn-outline-info\">Save</button>\n    </form>\n  );\n};\n\nexport default ProductUpdateForm;\n","import React, { useState, useEffect } from \"react\";\nimport AdminNav from \"../../../components/nav/AdminNav\";\nimport { toast } from \"react-toastify\";\nimport { useSelector } from \"react-redux\";\nimport { getProduct, updateProduct } from \"../../../functions/product\";\nimport { getCategories, getCategorySubs } from \"../../../functions/category\";\nimport FileUpload from \"../../../components/forms/FileUpload\";\nimport { LoadingOutlined } from \"@ant-design/icons\";\nimport ProductUpdateForm from \"../../../components/forms/ProductUpdateForm\";\n\nconst initialState = {\n  title: \"\",\n  description: \"\",\n  price: \"\",\n  category: \"\",\n  subs: [],\n  shipping: \"\",\n  quantity: \"\",\n  images: [],\n  colors: [\"Black\", \"Brown\", \"Silver\", \"White\", \"Blue\"],\n  brands: [\"Apple\", \"Samsung\", \"Microsoft\", \"Lenovo\", \"ASUS\"],\n  color: \"\",\n  brand: \"\",\n};\n\nconst ProductUpdate = ({ match, history }) => {\n  // state\n  const [values, setValues] = useState(initialState);\n  const [categories, setCategories] = useState([]);\n  const [subOptions, setSubOptions] = useState([]);\n  const [arrayOfSubs, setArrayOfSubs] = useState([]);\n  const [selectedCategory, setSelectedCategory] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const { user } = useSelector((state) => ({ ...state }));\n  // router\n  const { slug } = match.params;\n\n  useEffect(() => {\n    loadProduct();\n    loadCategories();\n  }, []);\n\n  const loadProduct = () => {\n    getProduct(slug).then((p) => {\n      // console.log(\"single product\", p);\n      // 1 load single proudct\n      setValues({ ...values, ...p.data });\n      // 2 load single product category subs\n      getCategorySubs(p.data.category._id).then((res) => {\n        setSubOptions(res.data); // on first load, show default subs\n      });\n      // 3 prepare array of sub ids to show as default sub values in antd Select\n      let arr = [];\n      p.data.subs.map((s) => {\n        arr.push(s._id);\n      });\n      console.log(\"ARR\", arr);\n      setArrayOfSubs((prev) => arr); // required for ant design select to work\n    });\n  };\n\n  const loadCategories = () =>\n    getCategories().then((c) => {\n      console.log(\"GET CATEGORIES IN UPDATE PRODUCT\", c.data);\n      setCategories(c.data);\n    });\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setLoading(true);\n\n    values.subs = arrayOfSubs;\n    values.category = selectedCategory ? selectedCategory : values.category;\n\n    updateProduct(slug, values, user.token)\n      .then((res) => {\n        setLoading(false);\n        toast.success(`\"${res.data.title}\" is updated`);\n        history.push(\"/admin/products\");\n      })\n      .catch((err) => {\n        console.log(err);\n        setLoading(false);\n        toast.error(err.response.data.err);\n      });\n  };\n\n  const handleChange = (e) => {\n    setValues({ ...values, [e.target.name]: e.target.value });\n    // console.log(e.target.name, \" ----- \", e.target.value);\n  };\n\n  const handleCategoryChange = (e) => {\n    e.preventDefault();\n    console.log(\"CLICKED CATEGORY\", e.target.value);\n    setValues({ ...values, subs: [] });\n\n    setSelectedCategory(e.target.value);\n\n    getCategorySubs(e.target.value).then((res) => {\n      console.log(\"SUB OPTIONS ON CATGORY CLICK\", res);\n      setSubOptions(res.data);\n    });\n\n    console.log(\"EXISTING CATEGORY values.category\", values.category);\n\n    // if user clicks back to the original category\n    // show its sub categories in default\n    if (values.category._id === e.target.value) {\n      loadProduct();\n    }\n    // clear old sub category ids\n    setArrayOfSubs([]);\n  };\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-md-2\">\n          <AdminNav />\n        </div>\n\n        <div className=\"col-md-10\">\n          {loading ? (\n            <LoadingOutlined className=\"text-danger h1\" />\n          ) : (\n            <h4>Product update</h4>\n          )}\n\n          {/* {JSON.stringify(values)} */}\n\n          <div className=\"p-3\">\n            <FileUpload\n              values={values}\n              setValues={setValues}\n              setLoading={setLoading}\n            />\n          </div>\n\n          <ProductUpdateForm\n            handleSubmit={handleSubmit}\n            handleChange={handleChange}\n            setValues={setValues}\n            values={values}\n            handleCategoryChange={handleCategoryChange}\n            categories={categories}\n            subOptions={subOptions}\n            arrayOfSubs={arrayOfSubs}\n            setArrayOfSubs={setArrayOfSubs}\n            selectedCategory={selectedCategory}\n          />\n          <hr />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProductUpdate;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nconst ProductListItems = ({ product }) => {\n  const {\n    price,\n    category,\n    subs,\n    shipping,\n    color,\n    brand,\n    quantity,\n    sold,\n  } = product;\n\n  return (\n    <ul className=\"list-group\">\n      <li className=\"list-group-item\">\n        Price{\" \"}\n        <span className=\"label label-default label-pill pull-xs-right\">\n          $ {price}\n        </span>\n      </li>\n\n      {category && (\n        <li className=\"list-group-item\">\n          Category{\" \"}\n          <Link\n            to={`/category/${category.slug}`}\n            className=\"label label-default label-pill pull-xs-right\"\n          >\n            {category.name}\n          </Link>\n        </li>\n      )}\n\n      {subs && (\n        <li className=\"list-group-item\">\n          Sub Categories\n          {subs.map((s) => (\n            <Link\n              key={s._id}\n              to={`/sub/${s.slug}`}\n              className=\"label label-default label-pill pull-xs-right\"\n            >\n              {s.name}\n            </Link>\n          ))}\n        </li>\n      )}\n\n      <li className=\"list-group-item\">\n        Shipping{\" \"}\n        <span className=\"label label-default label-pill pull-xs-right\">\n          {shipping}\n        </span>\n      </li>\n\n      <li className=\"list-group-item\">\n        Color{\" \"}\n        <span className=\"label label-default label-pill pull-xs-right\">\n          {color}\n        </span>\n      </li>\n\n      <li className=\"list-group-item\">\n        Brand{\" \"}\n        <span className=\"label label-default label-pill pull-xs-right\">\n          {brand}\n        </span>\n      </li>\n\n      <li className=\"list-group-item\">\n        Available{\" \"}\n        <span className=\"label label-default label-pill pull-xs-right\">\n          {quantity}\n        </span>\n      </li>\n\n      <li className=\"list-group-item\">\n        Sold{\" \"}\n        <span className=\"label label-default label-pill pull-xs-right\">\n          {sold}\n        </span>\n      </li>\n    </ul>\n  );\n};\n\nexport default ProductListItems;\n","import React, { useState } from \"react\";\nimport { Modal, Button } from \"antd\";\nimport { toast } from \"react-toastify\";\nimport { useSelector } from \"react-redux\";\nimport { StarOutlined } from \"@ant-design/icons\";\nimport { useHistory, useParams } from \"react-router-dom\";\n\nconst RatingModal = ({ children }) => {\n  const { user } = useSelector((state) => ({ ...state }));\n  const [modalVisible, setModalVisible] = useState(false);\n\n  let history = useHistory();\n  let { slug } = useParams();\n\n  const handleModal = () => {\n    if (user && user.token) {\n      setModalVisible(true);\n    } else {\n      history.push({\n        pathname: \"/login\",\n        state: { from: `/product/${slug}` },\n      });\n    }\n  };\n\n  return (\n    <>\n      <div onClick={handleModal}>\n        <StarOutlined className=\"text-danger\" /> <br />{\" \"}\n        {user ? \"Leave rating\" : \"Login to leave rating\"}\n      </div>\n      <Modal\n        title=\"Leave your rating\"\n        centered\n        visible={modalVisible}\n        onOk={() => {\n          setModalVisible(false);\n          toast.success(\"Thanks for your review. It will apper soon\");\n        }}\n        onCancel={() => setModalVisible(false)}\n      >\n        {children}\n      </Modal>\n    </>\n  );\n};\n\nexport default RatingModal;\n","import React, { useState } from \"react\";\nimport { Card, Tabs, Tooltip } from \"antd\";\nimport { Link } from \"react-router-dom\";\nimport { HeartOutlined, ShoppingCartOutlined } from \"@ant-design/icons\";\nimport { Carousel } from \"react-responsive-carousel\";\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\";\nimport Laptop from \"../../images/laptop.png\";\nimport ProductListItems from \"./ProductListItems\";\nimport StarRating from \"react-star-ratings\";\nimport RatingModal from \"../modal/RatingModal\";\nimport { showAverage } from \"../../functions/rating\";\nimport _ from \"lodash\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\nconst { TabPane } = Tabs;\n\n// this is childrend component of Product page\nconst SingleProduct = ({ product, onStarClick, star }) => {\n  const [tooltip, setTooltip] = useState(\"Click to add\");\n\n  // redux\n  const { user, cart } = useSelector((state) => ({ ...state }));\n  const dispatch = useDispatch();\n\n  const { title, images, description, _id } = product;\n\n  const handleAddToCart = () => {\n    // create cart array\n    let cart = [];\n    if (typeof window !== \"undefined\") {\n      // if cart is in local storage GET it\n      if (localStorage.getItem(\"cart\")) {\n        cart = JSON.parse(localStorage.getItem(\"cart\"));\n      }\n      // push new product to cart\n      cart.push({\n        ...product,\n        count: 1,\n      });\n      // remove duplicates\n      let unique = _.uniqWith(cart, _.isEqual);\n      // save to local storage\n      // console.log('unique', unique)\n      localStorage.setItem(\"cart\", JSON.stringify(unique));\n      // show tooltip\n      setTooltip(\"Added\");\n\n      // add to reeux state\n      dispatch({\n        type: \"ADD_TO_CART\",\n        payload: unique,\n      });\n      // show cart items in side drawer\n      dispatch({\n        type: \"SET_VISIBLE\",\n        payload: true,\n      });\n    }\n  };\n\n  return (\n    <>\n      <div className=\"col-md-7\">\n        {images && images.length ? (\n          <Carousel showArrows={true} autoPlay infiniteLoop>\n            {images && images.map((i) => <img src={i.url} key={i.public_id} />)}\n          </Carousel>\n        ) : (\n          <Card cover={<img src={Laptop} className=\"mb-3 card-image\" />}></Card>\n        )}\n\n        <Tabs type=\"card\">\n          <TabPane tab=\"Description\" key=\"1\">\n            {description && description}\n          </TabPane>\n          <TabPane tab=\"More\" key=\"2\">\n            Call use on xxxx xxx xxx to learn more about this product.\n          </TabPane>\n        </Tabs>\n      </div>\n\n      <div className=\"col-md-5\">\n        <h1 className=\"bg-info p-3\">{title}</h1>\n\n        {product && product.ratings && product.ratings.length > 0 ? (\n          showAverage(product)\n        ) : (\n          <div className=\"text-center pt-1 pb-3\">No rating yet</div>\n        )}\n\n        <Card\n          actions={[\n            <Tooltip title={tooltip}>\n              <a onClick={handleAddToCart}>\n                <ShoppingCartOutlined className=\"text-danger\" /> <br /> Add to\n                Cart\n              </a>\n            </Tooltip>,\n            <Link to=\"/\">\n              <HeartOutlined className=\"text-info\" /> <br /> Add to Wishlist\n            </Link>,\n            <RatingModal>\n              <StarRating\n                name={_id}\n                numberOfStars={5}\n                rating={star}\n                changeRating={onStarClick}\n                isSelectable={true}\n                starRatedColor=\"red\"\n              />\n            </RatingModal>,\n          ]}\n        >\n          <ProductListItems product={product} />\n        </Card>\n      </div>\n    </>\n  );\n};\n\nexport default SingleProduct;\n","import React, { useEffect, useState } from \"react\";\nimport { getProduct, productStar } from \"../functions/product\";\nimport SingleProduct from \"../components/cards/SingleProduct\";\nimport { useSelector } from \"react-redux\";\nimport { getRelated } from \"../functions/product\";\nimport ProductCard from \"../components/cards/ProductCard\";\n\nconst Product = ({ match }) => {\n  const [product, setProduct] = useState({});\n  const [related, setRelated] = useState([]);\n  const [star, setStar] = useState(0);\n  // redux\n  const { user } = useSelector((state) => ({ ...state }));\n\n  const { slug } = match.params;\n\n  useEffect(() => {\n    loadSingleProduct();\n  }, [slug]);\n\n  useEffect(() => {\n    if (product.ratings && user) {\n      let existingRatingObject = product.ratings.find(\n        (ele) => ele.postedBy.toString() === user._id.toString()\n      );\n      existingRatingObject && setStar(existingRatingObject.star); // current user's star\n    }\n  });\n\n  const loadSingleProduct = () => {\n    getProduct(slug).then((res) => {\n      setProduct(res.data);\n      // load related\n      getRelated(res.data._id).then((res) => setRelated(res.data));\n    });\n  };\n\n  const onStarClick = (newRating, name) => {\n    setStar(newRating);\n    console.table(newRating, name);\n    productStar(name, newRating, user.token).then((res) => {\n      console.log(\"rating clicked\", res.data);\n      loadSingleProduct(); // if you want to show updated rating in real time\n    });\n  };\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row pt-4\">\n        <SingleProduct\n          product={product}\n          onStarClick={onStarClick}\n          star={star}\n        />\n      </div>\n\n      <div className=\"row\">\n        <div className=\"col text-center pt-5 pb-5\">\n          <hr />\n          <h4>Related Products</h4>\n          <hr />\n        </div>\n      </div>\n\n      <div className=\"row pb-5\">\n        {related.length ? (\n          related.map((r) => (\n            <div key={r._id} className=\"col-md-4\">\n              <ProductCard product={r} />\n            </div>\n          ))\n        ) : (\n          <div className=\"text-center col\">No Products Found</div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Product;\n","import React, { useState, useEffect } from \"react\";\nimport { getCategory } from \"../../functions/category\";\nimport ProductCard from \"../../components/cards/ProductCard\";\n\nconst CategoryHome = ({ match }) => {\n  const [category, setCategory] = useState({});\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  const { slug } = match.params;\n\n  useEffect(() => {\n    setLoading(true);\n    getCategory(slug).then((res) => {\n      console.log(JSON.stringify(res.data, null, 4));\n      setCategory(res.data.category);\n      setProducts(res.data.products);\n      setLoading(false);\n    });\n  }, []);\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col\">\n          {loading ? (\n            <h4 className=\"text-center p-3 mt-5 mb-5 display-4 jumbotron\">\n              Loading...\n            </h4>\n          ) : (\n            <h4 className=\"text-center p-3 mt-5 mb-5 display-4 jumbotron\">\n              {products.length} Products in \"{category.name}\" category\n            </h4>\n          )}\n        </div>\n      </div>\n\n      <div className=\"row\">\n        {products.map((p) => (\n          <div className=\"col\" key={p._id}>\n            <ProductCard product={p} />\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default CategoryHome;\n","import React, { useState, useEffect } from \"react\";\nimport { getSub } from \"../../functions/sub\";\nimport ProductCard from \"../../components/cards/ProductCard\";\n\nconst SubHome = ({ match }) => {\n  const [sub, setSub] = useState({});\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  const { slug } = match.params;\n\n  useEffect(() => {\n    setLoading(true);\n    getSub(slug).then((res) => {\n      console.log(JSON.stringify(res.data, null, 4));\n      setSub(res.data.sub);\n      setProducts(res.data.products);\n      setLoading(false);\n    });\n  }, []);\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col\">\n          {loading ? (\n            <h4 className=\"text-center p-3 mt-5 mb-5 display-4 jumbotron\">\n              Loading...\n            </h4>\n          ) : (\n            <h4 className=\"text-center p-3 mt-5 mb-5 display-4 jumbotron\">\n              {products.length} Products in \"{sub.name}\" sub category\n            </h4>\n          )}\n        </div>\n      </div>\n\n      <div className=\"row\">\n        {products.map((p) => (\n          <div className=\"col\" key={p._id}>\n            <ProductCard product={p} />\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default SubHome;\n","import React from \"react\";\nimport StarRating from \"react-star-ratings\";\n\nconst Star = ({ starClick, numberOfStars }) => (\n  <>\n    <StarRating\n      changeRating={() => starClick(numberOfStars)}\n      numberOfStars={numberOfStars}\n      starDimension=\"20px\"\n      starSpacing=\"2px\"\n      starHoverColor=\"red\"\n      starEmptyColor=\"red\"\n    />\n    <br />\n  </>\n);\n\nexport default Star;\n","import React, { useState, useEffect } from \"react\";\nimport {\n  getProductsByCount,\n  fetchProductsByFilter,\n} from \"../functions/product\";\nimport { getCategories } from \"../functions/category\";\nimport { getSubs } from \"../functions/sub\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport ProductCard from \"../components/cards/ProductCard\";\nimport { Menu, Slider, Checkbox, Radio } from \"antd\";\nimport {\n  DollarOutlined,\n  DownSquareOutlined,\n  StarOutlined,\n} from \"@ant-design/icons\";\nimport Star from \"../components/forms/Star\";\n\nconst { SubMenu, ItemGroup } = Menu;\n\nconst Shop = () => {\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [price, setPrice] = useState([0, 0]);\n  const [ok, setOk] = useState(false);\n  const [categories, setCategories] = useState([]);\n  const [categoryIds, setCategoryIds] = useState([]);\n  const [star, setStar] = useState(\"\");\n  const [subs, setSubs] = useState([]);\n  const [sub, setSub] = useState(\"\");\n  const [brands, setBrands] = useState([\n    \"Apple\",\n    \"Samsung\",\n    \"Microsoft\",\n    \"Lenovo\",\n    \"ASUS\",\n  ]);\n  const [brand, setBrand] = useState(\"\");\n  const [colors, setColors] = useState([\n    \"Black\",\n    \"Brown\",\n    \"Silver\",\n    \"White\",\n    \"Blue\",\n  ]);\n  const [color, setColor] = useState(\"\");\n  const [shipping, setShipping] = useState(\"\");\n\n  let dispatch = useDispatch();\n  let { search } = useSelector((state) => ({ ...state }));\n  const { text } = search;\n\n  useEffect(() => {\n    loadAllProducts();\n    // fetch categories\n    getCategories().then((res) => setCategories(res.data));\n    // fetch subcategories\n    getSubs().then((res) => setSubs(res.data));\n  }, []);\n\n  const fetchProducts = (arg) => {\n    fetchProductsByFilter(arg).then((res) => {\n      setProducts(res.data);\n    });\n  };\n\n  // 1. load products by default on page load\n  const loadAllProducts = () => {\n    getProductsByCount(12).then((p) => {\n      setProducts(p.data);\n      setLoading(false);\n    });\n  };\n\n  // 2. load products on user search input\n  useEffect(() => {\n    const delayed = setTimeout(() => {\n      fetchProducts({ query: text });\n      if (!text) {\n        loadAllProducts();\n      }\n    }, 300);\n    return () => clearTimeout(delayed);\n  }, [text]);\n\n  // 3. load products based on price range\n  useEffect(() => {\n    console.log(\"ok to request\");\n    fetchProducts({ price });\n  }, [ok]);\n\n  const handleSlider = (value) => {\n    dispatch({\n      type: \"SEARCH_QUERY\",\n      payload: { text: \"\" },\n    });\n\n    // reset\n    setCategoryIds([]);\n    setPrice(value);\n    setStar(\"\");\n    setSub(\"\");\n    setBrand(\"\");\n    setColor(\"\");\n    setShipping(\"\");\n    setTimeout(() => {\n      setOk(!ok);\n    }, 300);\n  };\n\n  // 4. load products based on category\n  // show categories in a list of checkbox\n  const showCategories = () =>\n    categories.map((c) => (\n      <div key={c._id}>\n        <Checkbox\n          onChange={handleCheck}\n          className=\"pb-2 pl-4 pr-4\"\n          value={c._id}\n          name=\"category\"\n          checked={categoryIds.includes(c._id)}\n        >\n          {c.name}\n        </Checkbox>\n        <br />\n      </div>\n    ));\n\n  // handle check for categories\n  const handleCheck = (e) => {\n    // reset\n    dispatch({\n      type: \"SEARCH_QUERY\",\n      payload: { text: \"\" },\n    });\n    setPrice([0, 0]);\n    setStar(\"\");\n    setSub(\"\");\n    setBrand(\"\");\n    setColor(\"\");\n    setShipping(\"\");\n    // console.log(e.target.value);\n    let inTheState = [...categoryIds];\n    let justChecked = e.target.value;\n    let foundInTheState = inTheState.indexOf(justChecked); // index or -1\n\n    // indexOf method ?? if not found returns -1 else return index [1,2,3,4,5]\n    if (foundInTheState === -1) {\n      inTheState.push(justChecked);\n    } else {\n      // if found pull out one item from index\n      inTheState.splice(foundInTheState, 1);\n    }\n\n    setCategoryIds(inTheState);\n    // console.log(inTheState);\n    fetchProducts({ category: inTheState });\n  };\n\n  // 5. show products by star rating\n  const handleStarClick = (num) => {\n    // console.log(num);\n    dispatch({\n      type: \"SEARCH_QUERY\",\n      payload: { text: \"\" },\n    });\n    setPrice([0, 0]);\n    setCategoryIds([]);\n    setStar(num);\n    setSub(\"\");\n    setBrand(\"\");\n    setColor(\"\");\n    setShipping(\"\");\n    fetchProducts({ stars: num });\n  };\n\n  const showStars = () => (\n    <div className=\"pr-4 pl-4 pb-2\">\n      <Star starClick={handleStarClick} numberOfStars={5} />\n      <Star starClick={handleStarClick} numberOfStars={4} />\n      <Star starClick={handleStarClick} numberOfStars={3} />\n      <Star starClick={handleStarClick} numberOfStars={2} />\n      <Star starClick={handleStarClick} numberOfStars={1} />\n    </div>\n  );\n\n  // 6. show products by sub category\n  const showSubs = () =>\n    subs.map((s) => (\n      <div\n        key={s._id}\n        onClick={() => handleSub(s)}\n        className=\"p-1 m-1 badge badge-secondary\"\n        style={{ cursor: \"pointer\" }}\n      >\n        {s.name}\n      </div>\n    ));\n\n  const handleSub = (sub) => {\n    // console.log(\"SUB\", sub);\n    setSub(sub);\n    dispatch({\n      type: \"SEARCH_QUERY\",\n      payload: { text: \"\" },\n    });\n    setPrice([0, 0]);\n    setCategoryIds([]);\n    setStar(\"\");\n    setBrand(\"\");\n    setColor(\"\");\n    setShipping(\"\");\n    fetchProducts({ sub });\n  };\n\n  // 7. show products based on brand name\n  const showBrands = () =>\n    brands.map((b) => (\n      <Radio\n        value={b}\n        name={b}\n        checked={b === brand}\n        onChange={handleBrand}\n        className=\"pb-1 pl-4 pr-4\"\n      >\n        {b}\n      </Radio>\n    ));\n\n  const handleBrand = (e) => {\n    setSub(\"\");\n    dispatch({\n      type: \"SEARCH_QUERY\",\n      payload: { text: \"\" },\n    });\n    setPrice([0, 0]);\n    setCategoryIds([]);\n    setStar(\"\");\n    setColor(\"\");\n    setBrand(e.target.value);\n    setShipping(\"\");\n    fetchProducts({ brand: e.target.value });\n  };\n\n  // 8. show products based on color\n  const showColors = () =>\n    colors.map((c) => (\n      <Radio\n        value={c}\n        name={c}\n        checked={c === color}\n        onChange={handleColor}\n        className=\"pb-1 pl-4 pr-4\"\n      >\n        {c}\n      </Radio>\n    ));\n\n  const handleColor = (e) => {\n    setSub(\"\");\n    dispatch({\n      type: \"SEARCH_QUERY\",\n      payload: { text: \"\" },\n    });\n    setPrice([0, 0]);\n    setCategoryIds([]);\n    setStar(\"\");\n    setBrand(\"\");\n    setColor(e.target.value);\n    setShipping(\"\");\n    fetchProducts({ color: e.target.value });\n  };\n\n  // 9. show products based on shipping yes/no\n  const showShipping = () => (\n    <>\n      <Checkbox\n        className=\"pb-2 pl-4 pr-4\"\n        onChange={handleShippingchange}\n        value=\"Yes\"\n        checked={shipping === \"Yes\"}\n      >\n        Yes\n      </Checkbox>\n\n      <Checkbox\n        className=\"pb-2 pl-4 pr-4\"\n        onChange={handleShippingchange}\n        value=\"No\"\n        checked={shipping === \"No\"}\n      >\n        No\n      </Checkbox>\n    </>\n  );\n\n  const handleShippingchange = (e) => {\n    setSub(\"\");\n    dispatch({\n      type: \"SEARCH_QUERY\",\n      payload: { text: \"\" },\n    });\n    setPrice([0, 0]);\n    setCategoryIds([]);\n    setStar(\"\");\n    setBrand(\"\");\n    setColor(\"\");\n    setShipping(e.target.value);\n    fetchProducts({ shipping: e.target.value });\n  };\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-md-3 pt-2\">\n          <h4>Search/Filter</h4>\n          <hr />\n\n          <Menu\n            defaultOpenKeys={[\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\"]}\n            mode=\"inline\"\n          >\n            {/* price */}\n            <SubMenu\n              key=\"1\"\n              title={\n                <span className=\"h6\">\n                  <DollarOutlined /> Price\n                </span>\n              }\n            >\n              <div>\n                <Slider\n                  className=\"ml-4 mr-4\"\n                  tipFormatter={(v) => `$${v}`}\n                  range\n                  value={price}\n                  onChange={handleSlider}\n                  max=\"4999\"\n                />\n              </div>\n            </SubMenu>\n\n            {/* category */}\n            <SubMenu\n              key=\"2\"\n              title={\n                <span className=\"h6\">\n                  <DownSquareOutlined /> Categories\n                </span>\n              }\n            >\n              <div style={{ maringTop: \"-10px\" }}>{showCategories()}</div>\n            </SubMenu>\n\n            {/* stars */}\n            <SubMenu\n              key=\"3\"\n              title={\n                <span className=\"h6\">\n                  <StarOutlined /> Rating\n                </span>\n              }\n            >\n              <div style={{ maringTop: \"-10px\" }}>{showStars()}</div>\n            </SubMenu>\n\n            {/* sub category */}\n            <SubMenu\n              key=\"4\"\n              title={\n                <span className=\"h6\">\n                  <DownSquareOutlined /> Sub Categories\n                </span>\n              }\n            >\n              <div style={{ maringTop: \"-10px\" }} className=\"pl-4 pr-4\">\n                {showSubs()}\n              </div>\n            </SubMenu>\n\n            {/* brands */}\n            <SubMenu\n              key=\"5\"\n              title={\n                <span className=\"h6\">\n                  <DownSquareOutlined /> Brands\n                </span>\n              }\n            >\n              <div style={{ maringTop: \"-10px\" }} className=\"pr-5\">\n                {showBrands()}\n              </div>\n            </SubMenu>\n\n            {/* colors */}\n            <SubMenu\n              key=\"6\"\n              title={\n                <span className=\"h6\">\n                  <DownSquareOutlined /> Colors\n                </span>\n              }\n            >\n              <div style={{ maringTop: \"-10px\" }} className=\"pr-5\">\n                {showColors()}\n              </div>\n            </SubMenu>\n\n            {/* shipping */}\n            <SubMenu\n              key=\"7\"\n              title={\n                <span className=\"h6\">\n                  <DownSquareOutlined /> Shipping\n                </span>\n              }\n            >\n              <div style={{ maringTop: \"-10px\" }} className=\"pr-5\">\n                {showShipping()}\n              </div>\n            </SubMenu>\n          </Menu>\n        </div>\n\n        <div className=\"col-md-9 pt-2\">\n          {loading ? (\n            <h4 className=\"text-danger\">Loading...</h4>\n          ) : (\n            <h4 className=\"text-danger\">Products</h4>\n          )}\n\n          {products.length < 1 && <p>No products found</p>}\n\n          <div className=\"row pb-5\">\n            {products.map((p) => (\n              <div key={p._id} className=\"col-md-4 mt-3\">\n                <ProductCard product={p} />\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Shop;\n","import React from \"react\";\nimport ModalImage from \"react-modal-image\";\nimport laptop from \"../../images/laptop.png\";\nimport { useDispatch } from \"react-redux\";\nimport { toast } from \"react-toastify\";\nimport {\n  CheckCircleOutlined,\n  CloseCircleOutlined,\n  CloseOutlined,\n} from \"@ant-design/icons\";\n\nconst ProductCardInCheckout = ({ p }) => {\n  const colors = [\"Black\", \"Brown\", \"Silver\", \"White\", \"Blue\"];\n  let dispatch = useDispatch();\n\n  const handleColorChange = (e) => {\n    console.log(\"color changed\", e.target.value);\n\n    let cart = [];\n    if (typeof window !== \"undefined\") {\n      if (localStorage.getItem(\"cart\")) {\n        cart = JSON.parse(localStorage.getItem(\"cart\"));\n      }\n\n      cart.map((product, i) => {\n        if (product._id === p._id) {\n          cart[i].color = e.target.value;\n        }\n      });\n\n      //  console.log('cart udpate color', cart)\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\n      dispatch({\n        type: \"ADD_TO_CART\",\n        payload: cart,\n      });\n    }\n  };\n\n  const handleQuantityChange = (e) => {\n    // console.log(\"available quantity\", p.quantity);\n    let count = e.target.value < 1 ? 1 : e.target.value;\n\n    if (count > p.quantity) {\n      toast.error(`Max available quantity: ${p.quantity}`);\n      return;\n    }\n\n    let cart = [];\n\n    if (typeof window !== \"undefined\") {\n      if (localStorage.getItem(\"cart\")) {\n        cart = JSON.parse(localStorage.getItem(\"cart\"));\n      }\n\n      cart.map((product, i) => {\n        if (product._id == p._id) {\n          cart[i].count = count;\n        }\n      });\n\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\n      dispatch({\n        type: \"ADD_TO_CART\",\n        payload: cart,\n      });\n    }\n  };\n\n  const handleRemove = () => {\n    // console.log(p._id, \"to remove\");\n    let cart = [];\n\n    if (typeof window !== \"undefined\") {\n      if (localStorage.getItem(\"cart\")) {\n        cart = JSON.parse(localStorage.getItem(\"cart\"));\n      }\n      // [1,2,3,4,5]\n      cart.map((product, i) => {\n        if (product._id === p._id) {\n          cart.splice(i, 1);\n        }\n      });\n\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\n      dispatch({\n        type: \"ADD_TO_CART\",\n        payload: cart,\n      });\n    }\n  };\n\n  return (\n    <tbody>\n      <tr>\n        <td>\n          <div style={{ width: \"100px\", height: \"auto\" }}>\n            {p.images.length ? (\n              <ModalImage small={p.images[0].url} large={p.images[0].url} />\n            ) : (\n              <ModalImage small={laptop} large={laptop} />\n            )}\n          </div>\n        </td>\n        <td>{p.title}</td>\n        <td>${p.price}</td>\n        <td>{p.brand}</td>\n        <td>\n          <select\n            onChange={handleColorChange}\n            name=\"color\"\n            className=\"form-control\"\n          >\n            {p.color ? (\n              <option value={p.color}>{p.color}</option>\n            ) : (\n              <option>Select</option>\n            )}\n            {colors\n              .filter((c) => c !== p.color)\n              .map((c) => (\n                <option key={c} value={c}>\n                  {c}\n                </option>\n              ))}\n          </select>\n        </td>\n        <td className=\"text-center\">\n          <input\n            type=\"number\"\n            className=\"form-control\"\n            value={p.count}\n            onChange={handleQuantityChange}\n          />\n        </td>\n        <td className=\"text-center\">\n          {p.shipping === \"Yes\" ? (\n            <CheckCircleOutlined className=\"text-success\" />\n          ) : (\n            <CloseCircleOutlined className=\"text-danger\" />\n          )}\n        </td>\n        <td className=\"text-center\">\n          <CloseOutlined\n            onClick={handleRemove}\n            className=\"text-danger pointer\"\n          />\n        </td>\n      </tr>\n    </tbody>\n  );\n};\n\nexport default ProductCardInCheckout;\n","import axios from \"axios\";\n\nexport const userCart = async (cart, authtoken) =>\n  await axios.post(\n    `${process.env.REACT_APP_API}/user/cart`,\n    { cart },\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n\nexport const getUserCart = async (authtoken) =>\n  await axios.get(`${process.env.REACT_APP_API}/user/cart`, {\n    headers: {\n      authtoken,\n    },\n  });\n\nexport const emptyUserCart = async (authtoken) =>\n  await axios.delete(`${process.env.REACT_APP_API}/user/cart`, {\n    headers: {\n      authtoken,\n    },\n  });\n\nexport const saveUserAddress = async (authtoken, address) =>\n  await axios.post(\n    `${process.env.REACT_APP_API}/user/address`,\n    { address },\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n\nexport const applyCoupon = async (authtoken, coupon) =>\n  await axios.post(\n    `${process.env.REACT_APP_API}/user/cart/coupon`,\n    { coupon },\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n","import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport ProductCardInCheckout from \"../components/cards/ProductCardInCheckout\";\nimport { userCart } from \"../functions/user\";\n\nconst Cart = ({ history }) => {\n  const { cart, user } = useSelector((state) => ({ ...state }));\n  const dispatch = useDispatch();\n\n  const getTotal = () => {\n    return cart.reduce((currentValue, nextValue) => {\n      return currentValue + nextValue.count * nextValue.price;\n    }, 0);\n  };\n\n  const saveOrderToDb = () => {\n    // console.log(\"cart\", JSON.stringify(cart, null, 4));\n    userCart(cart, user.token)\n      .then((res) => {\n        console.log(\"CART POST RES\", res);\n        if (res.data.ok) history.push(\"/checkout\");\n      })\n      .catch((err) => console.log(\"cart save err\", err));\n  };\n\n  const showCartItems = () => (\n    <table className=\"table table-bordered\">\n      <thead className=\"thead-light\">\n        <tr>\n          <th scope=\"col\">Image</th>\n          <th scope=\"col\">Title</th>\n          <th scope=\"col\">Price</th>\n          <th scope=\"col\">Brand</th>\n          <th scope=\"col\">Color</th>\n          <th scope=\"col\">Count</th>\n          <th scope=\"col\">Shipping</th>\n          <th scope=\"col\">Remove</th>\n        </tr>\n      </thead>\n\n      {cart.map((p) => (\n        <ProductCardInCheckout key={p._id} p={p} />\n      ))}\n    </table>\n  );\n\n  return (\n    <div className=\"container-fluid pt-2\">\n      <div className=\"row\">\n        <div className=\"col-md-8\">\n          <h4>Cart / {cart.length} Product</h4>\n\n          {!cart.length ? (\n            <p>\n              No products in cart. <Link to=\"/shop\">Continue Shopping.</Link>\n            </p>\n          ) : (\n            showCartItems()\n          )}\n        </div>\n        <div className=\"col-md-4\">\n          <h4>Order Summary</h4>\n          <hr />\n          <p>Products</p>\n          {cart.map((c, i) => (\n            <div key={i}>\n              <p>\n                {c.title} x {c.count} = ${c.price * c.count}\n              </p>\n            </div>\n          ))}\n          <hr />\n          Total: <b>${getTotal()}</b>\n          <hr />\n          {user ? (\n            <button\n              onClick={saveOrderToDb}\n              className=\"btn btn-sm btn-primary mt-2\"\n              disabled={!cart.length}\n            >\n              Proceed to Checkout\n            </button>\n          ) : (\n            <button className=\"btn btn-sm btn-primary mt-2\">\n              <Link\n                to={{\n                  pathname: \"/login\",\n                  state: { from: \"cart\" },\n                }}\n              >\n                Login to Checkout\n              </Link>\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Cart;\n","import React, { useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { toast } from \"react-toastify\";\nimport {\n  getUserCart,\n  emptyUserCart,\n  saveUserAddress,\n  applyCoupon,\n} from \"../functions/user\";\nimport ReactQuill from \"react-quill\";\nimport \"react-quill/dist/quill.snow.css\";\n\nconst Checkout = ({ history }) => {\n  const [products, setProducts] = useState([]);\n  const [total, setTotal] = useState(0);\n  const [address, setAddress] = useState(\"\");\n  const [addressSaved, setAddressSaved] = useState(false);\n  const [coupon, setCoupon] = useState(\"\");\n  // discount price\n  const [totalAfterDiscount, setTotalAfterDiscount] = useState(0);\n  const [discountError, setDiscountError] = useState(\"\");\n\n  const dispatch = useDispatch();\n  const { user } = useSelector((state) => ({ ...state }));\n\n  useEffect(() => {\n    getUserCart(user.token).then((res) => {\n      console.log(\"user cart res\", JSON.stringify(res.data, null, 4));\n      setProducts(res.data.products);\n      setTotal(res.data.cartTotal);\n    });\n  }, []);\n\n  const emptyCart = () => {\n    // remove from local storage\n    if (typeof window !== \"undefined\") {\n      localStorage.removeItem(\"cart\");\n    }\n    // remove from redux\n    dispatch({\n      type: \"ADD_TO_CART\",\n      payload: [],\n    });\n    // remove from backend\n    emptyUserCart(user.token).then((res) => {\n      setProducts([]);\n      setTotal(0);\n      setTotalAfterDiscount(0);\n      setCoupon(\"\");\n      toast.success(\"Cart is emapty. Contniue shopping.\");\n    });\n  };\n\n  const saveAddressToDb = () => {\n    // console.log(address);\n    saveUserAddress(user.token, address).then((res) => {\n      if (res.data.ok) {\n        setAddressSaved(true);\n        toast.success(\"Address saved\");\n      }\n    });\n  };\n\n  const applyDiscountCoupon = () => {\n    console.log(\"send coupon to backend\", coupon);\n    applyCoupon(user.token, coupon).then((res) => {\n      console.log(\"RES ON COUPON APPLIED\", res.data);\n      if (res.data) {\n        setTotalAfterDiscount(res.data);\n        // update redux coupon applied true/false\n        dispatch({\n          type: \"COUPON_APPLIED\",\n          payload: true,\n        });\n      }\n      // error\n      if (res.data.err) {\n        setDiscountError(res.data.err);\n        // update redux coupon applied true/false\n        dispatch({\n          type: \"COUPON_APPLIED\",\n          payload: false,\n        });\n      }\n    });\n  };\n\n  const showAddress = () => (\n    <>\n      <ReactQuill theme=\"snow\" value={address} onChange={setAddress} />\n      <button className=\"btn btn-primary mt-2\" onClick={saveAddressToDb}>\n        Save\n      </button>\n    </>\n  );\n\n  const showProductSummary = () =>\n    products.map((p, i) => (\n      <div key={i}>\n        <p>\n          {p.product.title} ({p.color}) x {p.count} ={\" \"}\n          {p.product.price * p.count}\n        </p>\n      </div>\n    ));\n\n  const showApplyCoupon = () => (\n    <>\n      <input\n        onChange={(e) => {\n          setCoupon(e.target.value);\n          setDiscountError(\"\");\n        }}\n        value={coupon}\n        type=\"text\"\n        className=\"form-control\"\n      />\n      <button onClick={applyDiscountCoupon} className=\"btn btn-primary mt-2\">\n        Apply\n      </button>\n    </>\n  );\n\n  return (\n    <div className=\"row\">\n      <div className=\"col-md-6\">\n        <h4>Delivery Address</h4>\n        <br />\n        <br />\n        {showAddress()}\n        <hr />\n        <h4>Got Coupon?</h4>\n        <br />\n        {showApplyCoupon()}\n        <br />\n        {discountError && <p className=\"bg-danger p-2\">{discountError}</p>}\n      </div>\n\n      <div className=\"col-md-6\">\n        <h4>Order Summary</h4>\n        <hr />\n        <p>Products {products.length}</p>\n        <hr />\n        {showProductSummary()}\n        <hr />\n        <p>Cart Total: {total}</p>\n\n        {totalAfterDiscount > 0 && (\n          <p className=\"bg-success p-2\">\n            Discount Applied: Total Payable: ${totalAfterDiscount}\n          </p>\n        )}\n\n        <div className=\"row\">\n          <div className=\"col-md-6\">\n            <button\n              className=\"btn btn-primary\"\n              disabled={!addressSaved || !products.length}\n              onClick={() => history.push(\"/payment\")}\n            >\n              Place Order\n            </button>\n          </div>\n\n          <div className=\"col-md-6\">\n            <button\n              disabled={!products.length}\n              onClick={emptyCart}\n              className=\"btn btn-primary\"\n            >\n              Empty Cart\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Checkout;\n","import axios from \"axios\";\n\nexport const getCoupons = async () =>\n  await axios.get(`${process.env.REACT_APP_API}/coupons`);\n\nexport const removeCoupon = async (couponId, authtoken) =>\n  await axios.delete(`${process.env.REACT_APP_API}/coupon/${couponId}`, {\n    headers: {\n      authtoken,\n    },\n  });\n\nexport const createCoupon = async (coupon, authtoken) =>\n  await axios.post(\n    `${process.env.REACT_APP_API}/coupon`,\n    { coupon },\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n","import React, { useState, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { toast } from \"react-toastify\";\nimport DatePicker from \"react-datepicker\";\nimport {\n  getCoupons,\n  removeCoupon,\n  createCoupon,\n} from \"../../../functions/coupon\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { DeleteOutlined } from \"@ant-design/icons\";\nimport AdminNav from \"../../../components/nav/AdminNav\";\n\nconst CreateCouponPage = () => {\n  const [name, setName] = useState(\"\");\n  const [expiry, setExpiry] = useState(\"\");\n  const [discount, setDiscount] = useState(\"\");\n  const [loading, setLoading] = useState(\"\");\n  const [coupons, setCoupons] = useState([]);\n\n  // redux\n  const { user } = useSelector((state) => ({ ...state }));\n\n  useEffect(() => {\n    loadAllCoupons();\n  }, []);\n\n  const loadAllCoupons = () => getCoupons().then((res) => setCoupons(res.data));\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setLoading(true);\n    // console.table(name, expiry, discount);\n    createCoupon({ name, expiry, discount }, user.token)\n      .then((res) => {\n        setLoading(false);\n        loadAllCoupons(); // load all coupons\n        setName(\"\");\n        setDiscount(\"\");\n        setExpiry(\"\");\n        toast.success(`\"${res.data.name}\" is created`);\n      })\n      .catch((err) => console.log(\"create coupon err\", err));\n  };\n\n  const handleRemove = (couponId) => {\n    if (window.confirm(\"Delete?\")) {\n      setLoading(true);\n      removeCoupon(couponId, user.token)\n        .then((res) => {\n          loadAllCoupons(); // load all coupons\n          setLoading(false);\n          toast.error(`Coupon \"${res.data.name}\" deleted`);\n        })\n        .catch((err) => console.log(err));\n    }\n  };\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-md-2\">\n          <AdminNav />\n        </div>\n        <div className=\"col-md-10\">\n          {loading ? (\n            <h4 className=\"text-danger\">Loading...</h4>\n          ) : (\n            <h4>Coupon</h4>\n          )}\n\n          <form onSubmit={handleSubmit}>\n            <div className=\"form-group\">\n              <label className=\"text-muted\">Name</label>\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                onChange={(e) => setName(e.target.value)}\n                value={name}\n                autoFocus\n                required\n              />\n            </div>\n\n            <div className=\"form-group\">\n              <label className=\"text-muted\">Discount %</label>\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                onChange={(e) => setDiscount(e.target.value)}\n                value={discount}\n                required\n              />\n            </div>\n\n            <div className=\"form-group\">\n              <label className=\"text-muted\">Expiry</label>\n              <br />\n              <DatePicker\n                className=\"form-control\"\n                selected={new Date()}\n                value={expiry}\n                onChange={(date) => setExpiry(date)}\n                required\n              />\n            </div>\n\n            <button className=\"btn btn-outline-primary\">Save</button>\n          </form>\n\n          <br />\n\n          <h4>{coupons.length} Coupons</h4>\n\n          <table className=\"table table-bordered\">\n            <thead className=\"thead-light\">\n              <tr>\n                <th scope=\"col\">Name</th>\n                <th scope=\"col\">Expiry</th>\n                <th scope=\"col\">Discount</th>\n                <th scope=\"col\">Action</th>\n              </tr>\n            </thead>\n\n            <tbody>\n              {coupons.map((c) => (\n                <tr key={c._id}>\n                  <td>{c.name}</td>\n                  <td>{new Date(c.expiry).toLocaleDateString()}</td>\n                  <td>{c.discount}%</td>\n                  <td>\n                    <DeleteOutlined\n                      onClick={() => handleRemove(c._id)}\n                      className=\"text-danger pointer\"\n                    />\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CreateCouponPage;\n","import React from \"react\";\n\nconst Payment = () => {\n  return (\n    <div className=\"container p-5 text-center\">\n      <p>Complete your purchase</p>\n    </div>\n  );\n};\n\nexport default Payment;\n","import React, { useEffect } from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport { ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nimport Login from \"./pages/auth/Login\";\nimport Register from \"./pages/auth/Register\";\nimport Home from \"./pages/Home\";\nimport Header from \"./components/nav/Header\";\nimport SideDrawer from \"./components/drawer/SideDrawer\";\n\nimport RegisterComplete from \"./pages/auth/RegisterComplete\";\nimport ForgotPassword from \"./pages/auth/ForgotPassword\";\nimport History from \"./pages/user/History\";\nimport UserRoute from \"./components/routes/UserRoute\";\nimport AdminRoute from \"./components/routes/AdminRoute\";\nimport Password from \"./pages/user/Password\";\nimport Wishlist from \"./pages/user/Wishlist\";\nimport AdminDashboard from \"./pages/admin/AdminDashboard\";\nimport SellerDashboard from \"./pages/seller/SellerDashboard\";\nimport CategoryCreate from \"./pages/admin/category/CategoryCreate\";\nimport CategoryUpdate from \"./pages/admin/category/CategoryUpdate\";\nimport SubCreate from \"./pages/admin/sub/SubCreate\";\nimport SubUpdate from \"./pages/admin/sub/SubUpdate\";\nimport ProductCreate from \"./pages/admin/product/ProductCreate\";\nimport AllProducts from \"./pages/admin/product/AllProducts\";\nimport ProductUpdate from \"./pages/admin/product/ProductUpdate\";\nimport Product from \"./pages/Product\";\nimport CategoryHome from \"./pages/category/CategoryHome\";\nimport SubHome from \"./pages/sub/SubHome\";\nimport Shop from \"./pages/Shop\";\nimport Cart from \"./pages/Cart\";\nimport Checkout from \"./pages/Checkout\";\nimport CreateCouponPage from \"./pages/admin/coupon/CreateCouponPage\";\nimport Payment from \"./pages/Payment\";\n\nimport { auth } from \"./firebase\";\nimport { useDispatch } from \"react-redux\";\nimport { currentUser } from \"./functions/auth\";\n\nconst App = () => {\n  const dispatch = useDispatch();\n\n  // to check firebase auth state\n  useEffect(() => {\n    const unsubscribe = auth.onAuthStateChanged(async (user) => {\n      if (user) {\n        const idTokenResult = await user.getIdTokenResult();\n        // console.log(\"user\", user);\n\n        currentUser(idTokenResult.token)\n          .then((res) => {\n            dispatch({\n              type: \"LOGGED_IN_USER\",\n              payload: {\n                name: res.data.name,\n                email: res.data.email,\n                token: idTokenResult.token,\n                role: res.data.role,\n                _id: res.data._id,\n              },\n            });\n          })\n          .catch((err) => console.log(err));\n      }\n    });\n    // cleanup\n    return () => unsubscribe();\n  }, [dispatch]);\n\n  return (\n    <>\n      <Header />\n      <SideDrawer />\n      <ToastContainer />\n      <Switch>\n        <Route exact path=\"/\" component={Home} />\n        <Route exact path=\"/login\" component={Login} />\n        <Route exact path=\"/register\" component={Register} />\n        <Route exact path=\"/register/complete\" component={RegisterComplete} />\n        <Route exact path=\"/forgot/password\" component={ForgotPassword} />\n        <UserRoute exact path=\"/user/history\" component={History} />\n        <UserRoute exact path=\"/user/password\" component={Password} />\n        <UserRoute exact path=\"/user/wishlist\" component={Wishlist} />\n        <AdminRoute exact path=\"/admin/dashboard\" component={AdminDashboard} />\n        <AdminRoute exact path=\"/seller/dashboard\" component={SellerDashboard} />\n        <AdminRoute exact path=\"/admin/category\" component={CategoryCreate} />\n        <AdminRoute\n          exact\n          path=\"/admin/category/:slug\"\n          component={CategoryUpdate}\n        />\n        <AdminRoute exact path=\"/admin/sub\" component={SubCreate} />\n        <AdminRoute exact path=\"/admin/sub/:slug\" component={SubUpdate} />\n        <AdminRoute exact path=\"/admin/product\" component={ProductCreate} />\n        <AdminRoute exact path=\"/admin/products\" component={AllProducts} />\n        <AdminRoute\n          exact\n          path=\"/admin/product/:slug\"\n          component={ProductUpdate}\n        />\n        <Route exact path=\"/product/:slug\" component={Product} />\n        <Route exact path=\"/category/:slug\" component={CategoryHome} />\n        <Route exact path=\"/sub/:slug\" component={SubHome} />\n        <Route exact path=\"/shop\" component={Shop} />\n        <Route exact path=\"/cart\" component={Cart} />\n        <UserRoute exact path=\"/checkout\" component={Checkout} />\n        <AdminRoute exact path=\"/admin/coupon\" component={CreateCouponPage} />\n        <UserRoute exact path=\"/payment\" component={Payment} />\n      </Switch>\n    </>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","let initialState = [];\n\n// load cart items from local storage\nif (typeof window !== \"undefined\") {\n  if (localStorage.getItem(\"cart\")) {\n    initialState = JSON.parse(localStorage.getItem(\"cart\"));\n  } else {\n    initialState = [];\n  }\n}\n\nexport const cartReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case \"ADD_TO_CART\":\n      return action.payload;\n    default:\n      return state;\n  }\n};\n","import { combineReducers } from \"redux\";\nimport { userReducer } from \"./userReducer\";\nimport { searchReducer } from \"./searchReducer\";\nimport { cartReducer } from \"./cartReducer\";\nimport { drawerReducer } from \"./drawerReducer\";\nimport { couponReducer } from \"./couponReducer\";\n\nconst rootReducer = combineReducers({\n  user: userReducer,\n  search: searchReducer,\n  cart: cartReducer,\n  drawer: drawerReducer,\n  coupon: couponReducer,\n});\n\nexport default rootReducer;\n","export const userReducer = (state = null, action) => {\n  switch (action.type) {\n    case \"LOGGED_IN_USER\":\n      return action.payload;\n    case \"LOGOUT\":\n      return action.payload;\n    default:\n      return state;\n  }\n};\n","export const searchReducer = (state = { text: \"\" }, action) => {\n  switch (action.type) {\n    case \"SEARCH_QUERY\":\n      return { ...state, ...action.payload };\n    default:\n      return state;\n  }\n};\n","export const drawerReducer = (state = false, action) => {\n  switch (action.type) {\n    case \"SET_VISIBLE\":\n      return action.payload;\n    default:\n      return state;\n  }\n};\n","export const couponReducer = (state = false, action) => {\n  switch (action.type) {\n    case \"COUPON_APPLIED\":\n      return action.payload;\n    default:\n      return state;\n  }\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport \"antd/dist/antd.css\";\n\nimport { createStore } from \"redux\";\nimport { Provider } from \"react-redux\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport rootReducer from \"./reducers\";\n\n// store\nconst store = createStore(rootReducer, composeWithDevTools());\n\nReactDOM.render(\n  // <React.StrictMode>\n  <Provider store={store}>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </Provider>,\n  // </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}